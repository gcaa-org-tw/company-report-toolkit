import{u as L}from"./useProfessionApi.d39d18ff.js";import{f as w,r as I,L as k,o,c as n,a as t,F as m,y as u,i as v,t as i,d as R,p as O,e as S,_ as C}from"./entry.abf3ce83.js";import{w as E}from"./lodash.4c885432.js";const d=c=>(O("data-v-7209a911"),c=c(),S(),c),A={class:"admin pa4 lh-copy"},B=d(()=>t("h1",{class:"f2 fw6"},"使用者權限管理",-1)),N=d(()=>t("p",{class:"f4 mb4"}," 只有協作者 + 管理員可以判讀報告書，管理員另外也可以將報告書標為已驗證。 ",-1)),P={class:"w-100 ba b--moon-gray",cellspacing:"0"},F=d(()=>t("thead",null,[t("tr",{class:"bg-light-gray"},[t("th",{class:"pv2 ph3 tl"},"使用者名稱"),t("th",{class:"pv2 ph3 tl"},"電子郵件"),t("th",{class:"pv2 ph3 tl"},"身份")])],-1)),M={class:"pv2 ph3 bt b--moon-gray flex items-center"},T=["title"],V={class:"pv2 ph3 bt b--moon-gray"},$={class:"pv2 ph3 bt b--moon-gray"},j=["value","onChange"],D=["value"],U=w({__name:"admin",setup(c){const{feathers:r,user:f}=L(),p=I([]),l={admin:"管理員",collaborator:"協作者",visitor:"訪客"},y={admin:"🧙",collaborator:"🖊️",visitor:"👤"},g=Object.keys(l),h=k();function b(){r.app.service("users").find({}).then(a=>{p.value=a.data})}async function x(a,_){const e=_.target.value;if(a.id===f.value.id){h.add({type:"error",text:"不可以更改自己的身份喔！（搖指） 好險機器人有發現，不然改完你就看不到這頁惹 🤖🤖"}),_.target.value=a.role;return}e!==a.role&&(await r.app.service("users").patch(a.id,{role:e}),a.role=e,h.add({type:"success",text:`已將 ${a.name} 身份改為 ${l[e]}`}))}return E(()=>r.isReady.value,a=>{a&&b()}),(a,_)=>(o(),n("div",A,[B,N,t("table",P,[F,t("tbody",null,[(o(!0),n(m,null,u(v(p),e=>(o(),n("tr",{key:e.id},[t("td",M,[t("span",{title:l[e.role],class:"mr2"},i(y[e.role]),9,T),R(" "+i(e.name),1)]),t("td",V,i(e.email),1),t("td",$,[t("select",{name:"role",value:e.role,class:"admin__role",onChange:s=>x(e,s)},[(o(!0),n(m,null,u(v(g),s=>(o(),n("option",{key:s,value:s},i(l[s]),9,D))),128))],40,j)])]))),128))])])]))}});const H=C(U,[["__scopeId","data-v-7209a911"]]);export{H as default};
