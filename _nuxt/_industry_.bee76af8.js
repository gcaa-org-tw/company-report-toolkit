import{_ as C}from"./FieldProgress.a37a62db.js";import{_ as N,o,c as r,f as I,h as $,i as t,F as k,y as w,I as V,w as A,a as n,t as _,b,n as P,g as S,r as L,B as Y,C as g,j as E}from"./entry.bc878567.js";import{_ as q}from"./nuxt-link.5c576d16.js";import{d as H}from"./dayjs.min.3fe911e8.js";import{u as O}from"./useProfessionApi.72770dfa.js";import{m as z}from"./industryStats.5556f7dc.js";import"./_commonjsHelpers.87769638.js";const M={},G={class:"mv5 tc f2 fw7"};function J(s,c){return o(),r("h1",G," 施工中，之後可以在這裡看整個產業的驗證狀況、驗證 ")}const K=N(M,[["render",J]]),Q={class:"reportList"},U=P('<div class="reportList__report"><div class="reportList__cell">公司名稱</div><div class="reportList__cell">年份</div><div class="reportList__cell">進度</div><div class="reportList__cell">更新時間</div></div>',1),W={class:"reportList__cell"},X={class:"reportList__cell"},Z={class:"reportList__cell"},T={class:"reportList__cell"},tt=n("i",{class:"fa-solid fa-arrow-right self-center"},null,-1),st={key:1,class:"pa2 tc"},et=I({__name:"ReportList",props:{reportList:{},filter:{}},setup(s){const c=s,l=$(()=>c.filter===v.all?c.reportList:c.reportList.filter(e=>c.filter===v.verified?e.isVerified:c.filter===v.isAnswered?e.answeredFields===e.totalFields:e.answeredFields<e.totalFields));function p(e){return H(e).format("YYYY/MM/DD HH:mm")}return(e,y)=>{const f=C,d=q;return o(),r("div",Q,[U,t(l).length?(o(!0),r(k,{key:0},w(t(l),a=>(o(),V(d,{key:a.id,to:`/profession/report/${a.id}`,class:"reportList__report black dim no-underline"},{default:A(()=>[n("div",W,_(a.company.name),1),n("div",X,_(a.year),1),n("div",Z,[b(f,{progress:a,"is-industry":!1},null,8,["progress"])]),n("div",T,_(p(a.updatedAt)),1),tt]),_:2},1032,["to"]))),128)):(o(),r("div",st," 此分類無 資料 "))])}}});const ot={class:"pb3"},nt={class:"tc f2 fw6 mb2"},rt={class:"tc f3 mv2"},it={class:"w5 center"},at={class:"pv3 mb4 bt bb b--moon-gray flex justify-between"},ct=["onClick"],_t={class:"industry__modeList"},lt=["onClick"],dt={key:0},ut={key:1,class:"pa4"};var v=(s=>(s.all="全部",s.verified="已驗證",s.isAnswered="判讀完成",s.pending="待判讀",s))(v||{}),R=(s=>(s.list="報告書列表",s.detail="所有欄位資料",s))(R||{});const bt=I({__name:"[industry]",setup(s){const l=S().params.industry,{feathers:p}=O(),e=L([]),y=L("全部"),f=L("報告書列表"),d=$(()=>f.value==="所有欄位資料");function a(u){y.value=u}const x=$(()=>{const u={};return e.value.forEach(h=>{z(u,h)}),u[l]});async function D(){const h=(await p.app.service("company").find({query:{industry:l,$select:["id"],$limit:500}})).data.map(m=>m.id);p.app.service("report").find({query:{companyId:{$in:h},$limit:500}}).then(m=>{e.value=m.data})}return Y(()=>{p.isReady.value&&D()}),(u,h)=>{const m=C,j=K,B=et;return t(e).length?(o(),r("div",{key:0,class:g(["industry pa4 lh-copy",{"industry--wide":t(d)}])},[n("div",ot,[n("h1",nt,_(t(l)),1),n("p",rt,_(t(x).total)+" 本",1),n("div",it,[b(m,{progress:t(x)},null,8,["progress"])])]),n("div",at,[n("div",{class:g({"o-80":t(d)})},[(o(!0),r(k,null,w(Object.values(v),i=>(o(),r("button",{class:g(["industry__filter bg-white pv2 ph3 ba b--light-gray br2 dim pointer",{"bg-green":t(y)===i,"moon-gray":t(d)}]),key:i,onClick:F=>a(i)},_(i),11,ct))),128))],2),n("div",_t,[(o(!0),r(k,null,w(Object.values(R),i=>(o(),r("button",{class:g(["industry__mode bg-white pv2 ph3 ba b-light-green b--light-gray br2 dim pointer",{"industry__mode--active":t(f)===i}]),key:i,onClick:F=>f.value=i},_(i),11,lt))),128))])]),t(d)?(o(),r("div",dt,[b(j)])):(o(),r("div",ut,[b(B,{"report-list":t(e),filter:t(y)},null,8,["report-list","filter"])]))],2)):E("",!0)}}});export{v as FilterType,bt as default};
