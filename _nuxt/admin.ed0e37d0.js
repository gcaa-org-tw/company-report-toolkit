import{u as w}from"./useProfessionApi.1f12ac57.js";import{f as L,r as k,L as x,o,c as n,a as t,F as m,y as u,i as v,t as d,p as I,e as R,_ as S}from"./entry.0f6cf8e8.js";import{w as B}from"./lodash.57634e5f.js";const _=c=>(I("data-v-0db2184c"),c=c(),R(),c),C={class:"admin pa4 lh-copy"},E=_(()=>t("h1",{class:"f2 fw6"},"ä½¿ç”¨è€…æ¬Šé™ç®¡ç†",-1)),O=_(()=>t("p",{class:"f4 mb4"}," åªæœ‰å”ä½œè€… + ç®¡ç†å“¡å¯ä»¥åˆ¤è®€å ±å‘Šæ›¸ï¼Œç®¡ç†å“¡å¦å¤–ä¹Ÿå¯ä»¥å°‡å ±å‘Šæ›¸æ¨™ç‚ºå·²é©—è­‰ã€‚ ",-1)),A={class:"w-100 ba b--moon-gray",cellspacing:"0"},F=_(()=>t("thead",null,[t("tr",{class:"bg-light-gray"},[t("th",{class:"pv2 ph3 tl"},"ä½¿ç”¨è€…åç¨±"),t("th",{class:"pv2 ph3 tl"},"é›»å­éƒµä»¶"),t("th",{class:"pv2 ph3 tl"},"èº«ä»½")])],-1)),P={class:"pv2 ph3 bt b--moon-gray"},$={class:"pv2 ph3 bt b--moon-gray"},j={class:"pv2 ph3 bt b--moon-gray"},D=["value","onChange"],M=["value"],N=L({__name:"admin",setup(c){const{feathers:l,user:f}=w(),p=k([]),i={admin:"ç®¡ç†å“¡",collaborator:"å”ä½œè€…",visitor:"è¨ªå®¢"},y=Object.keys(i),h=x();function b(){l.app.service("users").find({}).then(e=>{p.value=e.data})}async function g(e,r){const s=r.target.value;if(e.id===f.value.id){h.add({type:"error",text:"ä¸å¯ä»¥æ›´æ”¹è‡ªå·±çš„èº«ä»½å–”ï¼ï¼ˆæ–æŒ‡ï¼‰ å¥½éšªæ©Ÿå™¨äººæœ‰ç™¼ç¾ï¼Œä¸ç„¶æ”¹å®Œä½ å°±çœ‹ä¸åˆ°é€™é æƒ¹ ðŸ¤–ðŸ¤–"}),r.target.value=e.role;return}s!==e.role&&(await l.app.service("users").patch(e.id,{role:s}),e.role=s,h.add({type:"success",text:`å·²å°‡ ${e.name} èº«ä»½æ”¹ç‚º ${i[s]}`}))}return B(()=>l.isReady.value,e=>{e&&b()}),(e,r)=>(o(),n("div",C,[E,O,t("table",A,[F,t("tbody",null,[(o(!0),n(m,null,u(v(p),s=>(o(),n("tr",{key:s.id},[t("td",P,d(s.name),1),t("td",$,d(s.email),1),t("td",j,[t("select",{name:"role",value:s.role,class:"admin__role",onChange:a=>g(s,a)},[(o(!0),n(m,null,u(v(y),a=>(o(),n("option",{key:a,value:a},d(i[a]),9,M))),128))],40,D)])]))),128))])])]))}});const q=S(N,[["__scopeId","data-v-0db2184c"]]);export{q as default};
