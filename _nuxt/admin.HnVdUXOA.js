import{u as w}from"./useProfessionApi.FpVhGREC.js";import{f as I,r as L,K as k,o,c as n,a as t,F as m,x as f,h as u,t as i,d as R,p as O,e as S,_ as C}from"./entry.G35hZjvh.js";import{w as E}from"./lodash.l4Wf6ZdU.js";const p=c=>(O("data-v-7209a911"),c=c(),S(),c),A={class:"admin pa4 lh-copy"},B=p(()=>t("h1",{class:"f2 fw6"},"ä½¿ç”¨è€…æ¬Šé™ç®¡ç†",-1)),N=p(()=>t("p",{class:"f4 mb4"}," åªæœ‰å”ä½œè€… + ç®¡ç†å“¡å¯ä»¥åˆ¤è®€å ±å‘Šæ›¸ï¼Œç®¡ç†å“¡å¦å¤–ä¹Ÿå¯ä»¥å°‡å ±å‘Šæ›¸æ¨™ç‚ºå·²é©—è­‰ã€‚ ",-1)),P={class:"w-100 ba b--moon-gray",cellspacing:"0"},F=p(()=>t("thead",null,[t("tr",{class:"bg-light-gray"},[t("th",{class:"pv2 ph3 tl"},"ä½¿ç”¨è€…åç¨±"),t("th",{class:"pv2 ph3 tl"},"é›»å­éƒµä»¶"),t("th",{class:"pv2 ph3 tl"},"èº«ä»½")])],-1)),M={class:"pv2 ph3 bt b--moon-gray flex items-center"},T=["title"],V={class:"pv2 ph3 bt b--moon-gray"},$={class:"pv2 ph3 bt b--moon-gray"},j=["value","onChange"],D=["value"],K=I({__name:"admin",setup(c){const{feathers:r,user:v}=w(),_=L([]),l={admin:"ç®¡ç†å“¡",collaborator:"å”ä½œè€…",visitor:"è¨ªå®¢"},b={admin:"ðŸ§™",collaborator:"ðŸ–Šï¸",visitor:"ðŸ‘¤"},g=Object.keys(l),h=k();function y(){r.app.service("users").find({}).then(a=>{_.value=a.data})}async function x(a,d){const e=d.target.value;if(a.id===v.value.id){h.add({type:"error",text:"ä¸å¯ä»¥æ›´æ”¹è‡ªå·±çš„èº«ä»½å–”ï¼ï¼ˆæ–æŒ‡ï¼‰ å¥½éšªæ©Ÿå™¨äººæœ‰ç™¼ç¾ï¼Œä¸ç„¶æ”¹å®Œä½ å°±çœ‹ä¸åˆ°é€™é æƒ¹ ðŸ¤–ðŸ¤–"}),d.target.value=a.role;return}e!==a.role&&(await r.app.service("users").patch(a.id,{role:e}),a.role=e,h.add({type:"success",text:`å·²å°‡ ${a.name} èº«ä»½æ”¹ç‚º ${l[e]}`}))}return E(()=>r.isReady.value,a=>{a&&y()}),(a,d)=>(o(),n("div",A,[B,N,t("table",P,[F,t("tbody",null,[(o(!0),n(m,null,f(u(_),e=>(o(),n("tr",{key:e.id},[t("td",M,[t("span",{title:l[e.role],class:"mr2"},i(b[e.role]),9,T),R(" "+i(e.name),1)]),t("td",V,i(e.email),1),t("td",$,[t("select",{name:"role",value:e.role,class:"admin__role",onChange:s=>x(e,s)},[(o(!0),n(m,null,f(u(g),s=>(o(),n("option",{key:s,value:s},i(l[s]),9,D))),128))],40,j)])]))),128))])])]))}}),G=C(K,[["__scopeId","data-v-7209a911"]]);export{G as default};
