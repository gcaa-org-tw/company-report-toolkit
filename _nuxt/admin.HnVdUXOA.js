import{u as w}from"./useProfessionApi.FpVhGREC.js";import{f as I,r as L,K as k,o,c as n,a as t,F as m,x as f,h as u,t as i,d as R,p as O,e as S,_ as C}from"./entry.G35hZjvh.js";import{w as E}from"./lodash.l4Wf6ZdU.js";const p=c=>(O("data-v-7209a911"),c=c(),S(),c),A={class:"admin pa4 lh-copy"},B=p(()=>t("h1",{class:"f2 fw6"},"使用者權限管理",-1)),N=p(()=>t("p",{class:"f4 mb4"}," 只有協作者 + 管理員可以判讀報告書，管理員另外也可以將報告書標為已驗證。 ",-1)),P={class:"w-100 ba b--moon-gray",cellspacing:"0"},F=p(()=>t("thead",null,[t("tr",{class:"bg-light-gray"},[t("th",{class:"pv2 ph3 tl"},"使用者名稱"),t("th",{class:"pv2 ph3 tl"},"電子郵件"),t("th",{class:"pv2 ph3 tl"},"身份")])],-1)),M={class:"pv2 ph3 bt b--moon-gray flex items-center"},T=["title"],V={class:"pv2 ph3 bt b--moon-gray"},$={class:"pv2 ph3 bt b--moon-gray"},j=["value","onChange"],D=["value"],K=I({__name:"admin",setup(c){const{feathers:r,user:v}=w(),_=L([]),l={admin:"管理員",collaborator:"協作者",visitor:"訪客"},b={admin:"🧙",collaborator:"🖊️",visitor:"👤"},g=Object.keys(l),h=k();function y(){r.app.service("users").find({}).then(a=>{_.value=a.data})}async function x(a,d){const e=d.target.value;if(a.id===v.value.id){h.add({type:"error",text:"不可以更改自己的身份喔！（搖指） 好險機器人有發現，不然改完你就看不到這頁惹 🤖🤖"}),d.target.value=a.role;return}e!==a.role&&(await r.app.service("users").patch(a.id,{role:e}),a.role=e,h.add({type:"success",text:`已將 ${a.name} 身份改為 ${l[e]}`}))}return E(()=>r.isReady.value,a=>{a&&y()}),(a,d)=>(o(),n("div",A,[B,N,t("table",P,[F,t("tbody",null,[(o(!0),n(m,null,f(u(_),e=>(o(),n("tr",{key:e.id},[t("td",M,[t("span",{title:l[e.role],class:"mr2"},i(b[e.role]),9,T),R(" "+i(e.name),1)]),t("td",V,i(e.email),1),t("td",$,[t("select",{name:"role",value:e.role,class:"admin__role",onChange:s=>x(e,s)},[(o(!0),n(m,null,f(u(g),s=>(o(),n("option",{key:s,value:s},i(l[s]),9,D))),128))],40,j)])]))),128))])])]))}}),G=C(K,[["__scopeId","data-v-7209a911"]]);export{G as default};
