import{_ as $}from"./FieldProgress.53dc7e0f.js";import{_ as I}from"./nuxt-link.25688cdb.js";import{g as B,h as N,r as y,i as f,B as R,j as n,o,c as l,a as e,t as r,b as h,F as g,y as b,k as V,f as j,C as D,E,w as L}from"./entry.d3bd137e.js";import{u as S}from"./useProfessionApi.f7c1acb0.js";import{m as Y}from"./industryStats.5556f7dc.js";import{d as A}from"./dayjs.min.6de82947.js";import"./_commonjsHelpers.6d090dba.js";const M={key:0,class:"industry pa4 lh-copy"},q={class:"pb3"},H={class:"tc f2 fw6 mb2"},z={class:"tc f3 mv2"},O={class:"w5 center"},P={class:"pv3 mb4 bt bb b--moon-gray flex justify-center"},G=["onClick"],J={class:"pa4"},K=j('<div class="industry__report"><div class="industry__cell">公司名稱</div><div class="industry__cell">年份</div><div class="industry__cell">進度</div><div class="industry__cell">更新時間</div></div>',1),Q={class:"industry__cell"},U={class:"industry__cell"},W={class:"industry__cell"},X={class:"industry__cell"},Z={key:1,class:"pa2 tc"};var k=(i=>(i.all="全部",i.verified="已驗證",i.isAnswered="判讀完成",i.pending="待判讀",i))(k||{});const cs=B({__name:"[industry]",setup(i){const u=N().params.industry,{feathers:m}=S(),c=y([]),d=y("全部");function w(s){d.value=s}const p=f(()=>d.value==="全部"?c.value:c.value.filter(s=>d.value==="已驗證"?s.isVerified:d.value==="判讀完成"?s.answeredFields===s.totalFields:s.answeredFields<s.totalFields)),v=f(()=>{const s={};return c.value.forEach(_=>{Y(s,_)}),s[u]});async function x(){const _=(await m.app.service("company").find({query:{industry:u,$select:["id"],$limit:500}})).data.map(a=>a.id);m.app.service("report").find({query:{companyId:{$in:_},$limit:500}}).then(a=>{c.value=a.data})}function C(s){return A(s).format("YYYY/MM/DD HH:mm")}return R(()=>{m.isReady.value&&x()}),(s,_)=>{const a=$,F=I;return n(c).length?(o(),l("div",M,[e("div",q,[e("h1",H,r(n(u)),1),e("p",z,r(n(v).total)+" 本",1),e("div",O,[h(a,{progress:n(v)},null,8,["progress"])])]),e("div",P,[(o(!0),l(g,null,b(Object.values(k),t=>(o(),l("button",{class:D(["industry__filter bg-white pv2 ph3 ba b--light-gray br2 dim pointer",{"bg-green":n(d)===t}]),key:t,onClick:ss=>w(t)},r(t),11,G))),128))]),e("div",J,[K,n(p).length?(o(!0),l(g,{key:0},b(n(p),t=>(o(),E(F,{class:"industry__report black dim no-underline",key:t.id,to:`/profession/report/${t.id}`},{default:L(()=>[e("div",Q,r(t.company.name),1),e("div",U,r(t.year),1),e("div",W,[h(a,{progress:t,"is-industry":!1},null,8,["progress"])]),e("div",X,r(C(t.updatedAt)),1)]),_:2},1032,["to"]))),128)):(o(),l("div",Z,"此分類無 資料"))])])):V("",!0)}}});export{cs as default};
