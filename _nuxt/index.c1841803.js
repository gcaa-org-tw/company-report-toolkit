import{i as I,n as b,t as E,b as S,d as W}from"./lodash.73611309.js";import{r as a,Q as D,l as L,z as w,h as O}from"./entry.0c6ce048.js";function h(e){var t;const n=E(e);return(t=n==null?void 0:n.$el)!=null?t:n}const y=I?window:void 0,x=I?window.document:void 0;function A(...e){let t,n,r,i;if(typeof e[0]=="string"||Array.isArray(e[0])?([n,r,i]=e,t=y):[t,n,r,i]=e,!t)return b;Array.isArray(n)||(n=[n]),Array.isArray(r)||(r=[r]);const f=[],v=()=>{f.forEach(s=>s()),f.length=0},p=(s,o,l,u)=>(s.addEventListener(o,l,u),()=>s.removeEventListener(o,l,u)),d=w(()=>[h(t),E(i)],([s,o])=>{v(),s&&f.push(...n.flatMap(l=>r.map(u=>p(s,l,u,o))))},{immediate:!0,flush:"post"}),m=()=>{d(),v()};return S(m),m}function C(){const e=a(!1);return D()&&L(()=>{e.value=!0}),e}function F(e){const t=C();return O(()=>(t.value,!!e()))}function N({document:e=x}={}){if(!e)return a("visible");const t=a(e.visibilityState);return A(e,"visibilitychange",()=>{t.value=e.visibilityState}),t}function _(e,t,n={}){const{root:r,rootMargin:i="0px",threshold:f=.1,window:v=y,immediate:p=!0}=n,d=F(()=>v&&"IntersectionObserver"in v),m=O(()=>{const c=E(e);return(Array.isArray(c)?c:[c]).map(h).filter(W)});let s=b;const o=a(p),l=d.value?w(()=>[m.value,h(r),o.value],([c,V])=>{if(s(),!o.value||!c.length)return;const g=new IntersectionObserver(t,{root:h(V),rootMargin:i,threshold:f});c.forEach(M=>M&&g.observe(M)),s=()=>{g.disconnect(),s=b}},{immediate:p,flush:"post"}):b,u=()=>{s(),l(),o.value=!1};return S(u),{isSupported:d,isActive:o,pause(){s(),o.value=!1},resume(){o.value=!0},stop:u}}function Q(e,{window:t=y,scrollTarget:n}={}){const r=a(!1);return _(e,([{isIntersecting:i}])=>{r.value=i},{root:n,window:t}),r}function $({window:e=y}={}){if(!e)return a(!1);const t=a(e.document.hasFocus());return A(e,"blur",()=>{t.value=!1}),A(e,"focus",()=>{t.value=!0}),t}export{Q as a,N as b,$ as c,C as u};
