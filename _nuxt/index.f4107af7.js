import{n as mt,f as Ee,r as ne,j as ye,o as Q,c as ae,i as q,a as M,q as Se,v as Fe,s as yt,t as ue,x as Ve,F as Me,y as qe,k as Ue,d as ge,z as Ae,A as Ir,B as _t,C as Ar,D as Sr,p as kr,e as Er,_ as He,b as gt,E as ke,w as Rr,G as Cr}from"./entry.8bd70428.js";import{c as rt,g as bt}from"./_commonjsHelpers.734e3a26.js";import{_ as ve,a as Dr}from"./PdfViewer.7a11348c.js";import{d as Ge}from"./report-list.e521733a.js";import{_ as Lr}from"./nuxt-link.042ef9f4.js";function $e(Z){throw new Error('Could not dynamically require "'+Z+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xt={exports:{}};(function(Z,te){(function(t){Z.exports=t()})(function(){return function(){function t(i,c,a){function r(l,p){if(!c[l]){if(!i[l]){var d=typeof $e=="function"&&$e;if(!p&&d)return d(l,!0);if(o)return o(l,!0);var v=new Error("Cannot find module '"+l+"'");throw v.code="MODULE_NOT_FOUND",v}var _=c[l]={exports:{}};i[l][0].call(_.exports,function(g){var w=i[l][1][g];return r(w||g)},_,_.exports,t,i,c,a)}return c[l].exports}for(var o=typeof $e=="function"&&$e,f=0;f<a.length;f++)r(a[f]);return r}return t}()({1:[function(t,i,c){var a,r=typeof window<"u"?window:typeof self<"u"?self:null;if(!r)a=t("abort-controller");else if("signal"in new Request("https://airtable.com"))a=r.AbortController;else{var o=t("abortcontroller-polyfill/dist/cjs-ponyfill");a=o.AbortController}i.exports=a},{"abort-controller":20,"abortcontroller-polyfill/dist/cjs-ponyfill":19}],2:[function(t,i,c){var a=function(){function r(o,f,l){this.error=o,this.message=f,this.statusCode=l}return r.prototype.toString=function(){return[this.message,"(",this.error,")",this.statusCode?"[Http code "+this.statusCode+"]":""].join("")},r}();i.exports=a},{}],3:[function(t,i,c){var a=this&&this.__assign||function(){return a=Object.assign||function(I){for(var P,R=1,k=arguments.length;R<k;R++){P=arguments[R];for(var A in P)Object.prototype.hasOwnProperty.call(P,A)&&(I[A]=P[A])}return I},a.apply(this,arguments)},r=this&&this.__importDefault||function(I){return I&&I.__esModule?I:{default:I}},o=r(t("lodash/get")),f=r(t("lodash/isPlainObject")),l=r(t("lodash/keys")),p=r(t("./fetch")),d=r(t("./abort-controller")),v=r(t("./object_to_query_param_string")),_=r(t("./airtable_error")),g=r(t("./table")),w=r(t("./http_headers")),h=r(t("./run_action")),b=r(t("./package_version")),y=r(t("./exponential_backoff_with_jitter")),E="Airtable.js/"+b.default,x=function(){function I(P,R){this._airtable=P,this._id=R}return I.prototype.table=function(P){return new g.default(this,null,P)},I.prototype.makeRequest=function(P){var R=this,k;P===void 0&&(P={});var A=o.default(P,"method","GET").toUpperCase(),N=this._airtable._endpointUrl+"/v"+this._airtable._apiVersionMajor+"/"+this._id+o.default(P,"path","/")+"?"+v.default(o.default(P,"qs",{})),V=new d.default,Y=this._getRequestHeaders(Object.assign({},this._airtable._customHeaders,(k=P.headers)!==null&&k!==void 0?k:{})),oe={method:A,headers:Y,signal:V.signal};"body"in P&&T(A)&&(oe.body=JSON.stringify(P.body));var B=setTimeout(function(){V.abort()},this._airtable._requestTimeout);return new Promise(function(ee,W){p.default(N,oe).then(function(X){if(clearTimeout(B),X.status===429&&!R._airtable._noRetryIfRateLimited){var he=o.default(P,"_numAttempts",0),me=y.default(he);setTimeout(function(){var le=a(a({},P),{_numAttempts:he+1});R.makeRequest(le).then(ee).catch(W)},me)}else X.json().then(function(le){var _e=R._checkStatusForError(X.status,le)||j(X.status,le);_e?W(_e):ee({statusCode:X.status,headers:X.headers,body:le})}).catch(function(){var le=j(X.status);W(le)})}).catch(function(X){clearTimeout(B),X=new _.default("CONNECTION_ERROR",X.message,null),W(X)})})},I.prototype.runAction=function(P,R,k,A,N){h.default(this,P,R,k,A,N,0)},I.prototype._getRequestHeaders=function(P){var R=new w.default;R.set("Authorization","Bearer "+this._airtable._apiKey),R.set("User-Agent",E),R.set("Content-Type","application/json");for(var k=0,A=l.default(P);k<A.length;k++){var N=A[k];R.set(N,P[N])}return R.toJSON()},I.prototype._checkStatusForError=function(P,R){var k=(R??{error:{}}).error,A=k===void 0?{}:k,N=A.type,V=A.message;return P===401?new _.default("AUTHENTICATION_REQUIRED","You should provide valid api key to perform this operation",P):P===403?new _.default("NOT_AUTHORIZED","You are not authorized to perform this operation",P):P===404?new _.default("NOT_FOUND",V??"Could not find what you are looking for",P):P===413?new _.default("REQUEST_TOO_LARGE","Request body is too large",P):P===422?new _.default(N??"UNPROCESSABLE_ENTITY",V??"The operation cannot be processed",P):P===429?new _.default("TOO_MANY_REQUESTS","You have made too many requests in a short period of time. Please retry your request later",P):P===500?new _.default("SERVER_ERROR","Try again. If the problem persists, contact support.",P):P===503?new _.default("SERVICE_UNAVAILABLE","The service is temporarily unavailable. Please retry shortly.",P):P>=400?new _.default(N??"UNEXPECTED_ERROR",V??"An unexpected error occurred",P):null},I.prototype.doCall=function(P){return this.table(P)},I.prototype.getId=function(){return this._id},I.createFunctor=function(P,R){var k=new I(P,R),A=function(N){return k.doCall(N)};return A._base=k,A.table=k.table.bind(k),A.makeRequest=k.makeRequest.bind(k),A.runAction=k.runAction.bind(k),A.getId=k.getId.bind(k),A},I}();function T(I){return I!=="GET"&&I!=="DELETE"}function j(I,P){return f.default(P)?null:new _.default("UNEXPECTED_ERROR","The response from Airtable was invalid JSON. Please try again soon.",I)}i.exports=x},{"./abort-controller":1,"./airtable_error":2,"./exponential_backoff_with_jitter":6,"./fetch":7,"./http_headers":9,"./object_to_query_param_string":11,"./package_version":12,"./run_action":16,"./table":17,"lodash/get":77,"lodash/isPlainObject":89,"lodash/keys":93}],4:[function(t,i,c){function a(r,o,f){return f===void 0&&(f=void 0),function(){for(var l=[],p=0;p<arguments.length;p++)l[p]=arguments[p];var d;f===void 0?d=l.length>0?l.length-1:0:d=f;var v=l[d];if(typeof v=="function"){r.apply(o,l);return}else{for(var _=[],g=Math.max(l.length,d),w=0;w<g;w++)_.push(l[w]);return new Promise(function(h,b){_.push(function(y,E){y?b(y):h(E)}),r.apply(o,_)})}}}i.exports=a},{}],5:[function(t,i,c){var a={};function r(o,f,l){return function(){for(var p=[],d=0;d<arguments.length;d++)p[d]=arguments[d];a[f]||(a[f]=!0,console.warn(l)),o.apply(this,p)}}i.exports=r},{}],6:[function(t,i,c){var a=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}},r=a(t("./internal_config.json"));function o(f){var l=r.default.INITIAL_RETRY_DELAY_IF_RATE_LIMITED*Math.pow(2,f),p=Math.min(r.default.MAX_RETRY_DELAY_IF_RATE_LIMITED,l),d=Math.random()*p;return d}i.exports=o},{"./internal_config.json":10}],7:[function(t,i,c){var a=this&&this.__importDefault||function(f){return f&&f.__esModule?f:{default:f}},r=a(t("node-fetch")),o=typeof window<"u"?window:typeof self<"u"?self:null;i.exports=o?o.fetch.bind(o):r.default},{"node-fetch":20}],8:[function(t,i,c){function a(r,o){return Object.prototype.hasOwnProperty.call(r,o)}i.exports=a},{}],9:[function(t,i,c){var a=this&&this.__importDefault||function(l){return l&&l.__esModule?l:{default:l}},r=a(t("lodash/keys")),o=typeof window<"u",f=function(){function l(){this._headersByLowercasedKey={}}return l.prototype.set=function(p,d){var v=p.toLowerCase();v==="x-airtable-user-agent"&&(v="user-agent",p="User-Agent"),this._headersByLowercasedKey[v]={headerKey:p,headerValue:d}},l.prototype.toJSON=function(){for(var p={},d=0,v=r.default(this._headersByLowercasedKey);d<v.length;d++){var _=v[d],g=this._headersByLowercasedKey[_],w=void 0;o&&_==="user-agent"?w="X-Airtable-User-Agent":w=g.headerKey,p[w]=g.headerValue}return p},l}();i.exports=f},{"lodash/keys":93}],10:[function(t,i,c){i.exports={INITIAL_RETRY_DELAY_IF_RATE_LIMITED:5e3,MAX_RETRY_DELAY_IF_RATE_LIMITED:6e5}},{}],11:[function(t,i,c){var a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}},r=a(t("lodash/isArray")),o=a(t("lodash/isNil")),f=a(t("lodash/keys"));function l(d,v,_){if(r.default(v))for(var g=0;g<v.length;g++){var w=v[g];/\[\]$/.test(d)?_(d,w):l(d+"["+(typeof w=="object"&&w!==null?g:"")+"]",w,_)}else if(typeof v=="object")for(var h=0,b=f.default(v);h<b.length;h++){var y=b[h],w=v[y];l(d+"["+y+"]",w,_)}else _(d,v)}function p(d){for(var v=[],_=function(y,E){E=o.default(E)?"":E,v.push(encodeURIComponent(y)+"="+encodeURIComponent(E))},g=0,w=f.default(d);g<w.length;g++){var h=w[g],b=d[h];l(h,b,_)}return v.join("&").replace(/%20/g,"+")}i.exports=p},{"lodash/isArray":79,"lodash/isNil":85,"lodash/keys":93}],12:[function(t,i,c){i.exports="0.12.2"},{}],13:[function(t,i,c){var a=this&&this.__assign||function(){return a=Object.assign||function(y){for(var E,x=1,T=arguments.length;x<T;x++){E=arguments[x];for(var j in E)Object.prototype.hasOwnProperty.call(E,j)&&(y[j]=E[j])}return y},a.apply(this,arguments)},r=this&&this.__importDefault||function(y){return y&&y.__esModule?y:{default:y}},o=r(t("lodash/isFunction")),f=r(t("lodash/keys")),l=r(t("./record")),p=r(t("./callback_to_promise")),d=r(t("./has")),v=t("./query_params"),_=r(t("./object_to_query_param_string")),g=function(){function y(E,x){this._table=E,this._params=x,this.firstPage=p.default(w,this),this.eachPage=p.default(h,this,1),this.all=p.default(b,this)}return y.validateParams=function(E){for(var x={},T=[],j=[],I=0,P=f.default(E);I<P.length;I++){var R=P[I],k=E[R];if(d.default(y.paramValidators,R)){var A=y.paramValidators[R],N=A(k);N.pass?x[R]=k:j.push(N.error)}else T.push(R)}return{validParams:x,ignoredKeys:T,errors:j}},y.paramValidators=v.paramValidators,y}();function w(y){if(!o.default(y))throw new Error("The first parameter to `firstPage` must be a function");this.eachPage(function(E){y(null,E)},function(E){y(E,null)})}function h(y,E){var x=this;if(!o.default(y))throw new Error("The first parameter to `eachPage` must be a function");if(!o.default(E)&&E!==void 0)throw new Error("The second parameter to `eachPage` must be a function or undefined");var T=a({},this._params),j="/"+this._table._urlEncodedNameOrId()+"?"+_.default(T),I={},P=null,R,k;if(T.method==="post"||j.length>v.URL_CHARACTER_LENGTH_LIMIT){P=T,R="post",k="/"+this._table._urlEncodedNameOrId()+"/listRecords";for(var A=Object.keys(T),N=0,V=A;N<V.length;N++){var Y=V[N];v.shouldListRecordsParamBePassedAsParameter(Y)?I[Y]=T[Y]:P[Y]=T[Y]}}else R="get",I=T,k="/"+this._table._urlEncodedNameOrId();var oe=function(){x._table._base.runAction(R,k,I,P,function(B,ee,W){if(B)E(B,null);else{var X=void 0;W.offset?(T.offset=W.offset,X=oe):X=function(){E(null)};var he=W.records.map(function(me){return new l.default(x._table,null,me)});y(he,X)}})};oe()}function b(y){if(!o.default(y))throw new Error("The first parameter to `all` must be a function");var E=[];this.eachPage(function(x,T){E.push.apply(E,x),T()},function(x){x?y(x,null):y(null,E)})}i.exports=g},{"./callback_to_promise":4,"./has":8,"./object_to_query_param_string":11,"./query_params":14,"./record":15,"lodash/isFunction":83,"lodash/keys":93}],14:[function(t,i,c){var a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}};Object.defineProperty(c,"__esModule",{value:!0}),c.shouldListRecordsParamBePassedAsParameter=c.URL_CHARACTER_LENGTH_LIMIT=c.paramValidators=void 0;var r=a(t("./typecheck")),o=a(t("lodash/isString")),f=a(t("lodash/isNumber")),l=a(t("lodash/isPlainObject")),p=a(t("lodash/isBoolean"));c.paramValidators={fields:r.default(r.default.isArrayOf(o.default),"the value for `fields` should be an array of strings"),filterByFormula:r.default(o.default,"the value for `filterByFormula` should be a string"),maxRecords:r.default(f.default,"the value for `maxRecords` should be a number"),pageSize:r.default(f.default,"the value for `pageSize` should be a number"),offset:r.default(f.default,"the value for `offset` should be a number"),sort:r.default(r.default.isArrayOf(function(d){return l.default(d)&&o.default(d.field)&&(d.direction===void 0||["asc","desc"].includes(d.direction))}),'the value for `sort` should be an array of sort objects. Each sort object must have a string `field` value, and an optional `direction` value that is "asc" or "desc".'),view:r.default(o.default,"the value for `view` should be a string"),cellFormat:r.default(function(d){return o.default(d)&&["json","string"].includes(d)},'the value for `cellFormat` should be "json" or "string"'),timeZone:r.default(o.default,"the value for `timeZone` should be a string"),userLocale:r.default(o.default,"the value for `userLocale` should be a string"),method:r.default(function(d){return o.default(d)&&["get","post"].includes(d)},'the value for `method` should be "get" or "post"'),returnFieldsByFieldId:r.default(p.default,"the value for `returnFieldsByFieldId` should be a boolean"),recordMetadata:r.default(r.default.isArrayOf(o.default),"the value for `recordMetadata` should be an array of strings")},c.URL_CHARACTER_LENGTH_LIMIT=15e3,c.shouldListRecordsParamBePassedAsParameter=function(d){return d==="timeZone"||d==="userLocale"}},{"./typecheck":18,"lodash/isBoolean":81,"lodash/isNumber":86,"lodash/isPlainObject":89,"lodash/isString":90}],15:[function(t,i,c){var a=this&&this.__assign||function(){return a=Object.assign||function(g){for(var w,h=1,b=arguments.length;h<b;h++){w=arguments[h];for(var y in w)Object.prototype.hasOwnProperty.call(w,y)&&(g[y]=w[y])}return g},a.apply(this,arguments)},r=this&&this.__importDefault||function(g){return g&&g.__esModule?g:{default:g}},o=r(t("./callback_to_promise")),f=function(){function g(w,h,b){this._table=w,this.id=h||b.id,b&&(this.commentCount=b.commentCount),this.setRawJson(b),this.save=o.default(l,this),this.patchUpdate=o.default(p,this),this.putUpdate=o.default(d,this),this.destroy=o.default(v,this),this.fetch=o.default(_,this),this.updateFields=this.patchUpdate,this.replaceFields=this.putUpdate}return g.prototype.getId=function(){return this.id},g.prototype.get=function(w){return this.fields[w]},g.prototype.set=function(w,h){this.fields[w]=h},g.prototype.setRawJson=function(w){this._rawJson=w,this.fields=this._rawJson&&this._rawJson.fields||{}},g}();function l(g){this.putUpdate(this.fields,g)}function p(g,w,h){var b=this;h||(h=w,w={});var y=a({fields:g},w);this._table._base.runAction("patch","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},y,function(E,x,T){if(E){h(E);return}b.setRawJson(T),h(null,b)})}function d(g,w,h){var b=this;h||(h=w,w={});var y=a({fields:g},w);this._table._base.runAction("put","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},y,function(E,x,T){if(E){h(E);return}b.setRawJson(T),h(null,b)})}function v(g){var w=this;this._table._base.runAction("delete","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},null,function(h){if(h){g(h);return}g(null,w)})}function _(g){var w=this;this._table._base.runAction("get","/"+this._table._urlEncodedNameOrId()+"/"+this.id,{},null,function(h,b,y){if(h){g(h);return}w.setRawJson(y),g(null,w)})}i.exports=f},{"./callback_to_promise":4}],16:[function(t,i,c){var a=this&&this.__importDefault||function(_){return _&&_.__esModule?_:{default:_}},r=a(t("./exponential_backoff_with_jitter")),o=a(t("./object_to_query_param_string")),f=a(t("./package_version")),l=a(t("./fetch")),p=a(t("./abort-controller")),d="Airtable.js/"+f.default;function v(_,g,w,h,b,y,E){var x=_._airtable._endpointUrl+"/v"+_._airtable._apiVersionMajor+"/"+_._id+w+"?"+o.default(h),T={authorization:"Bearer "+_._airtable._apiKey,"x-api-version":_._airtable._apiVersion,"x-airtable-application-id":_.getId(),"content-type":"application/json"},j=typeof window<"u";j?T["x-airtable-user-agent"]=d:T["User-Agent"]=d;var I=new p.default,P=g.toUpperCase(),R={method:P,headers:T,signal:I.signal};b!==null&&(P==="GET"||P==="HEAD"?console.warn("body argument to runAction are ignored with GET or HEAD requests"):R.body=JSON.stringify(b));var k=setTimeout(function(){I.abort()},_._airtable._requestTimeout);l.default(x,R).then(function(A){if(clearTimeout(k),A.status===429&&!_._airtable._noRetryIfRateLimited){var N=r.default(E);setTimeout(function(){v(_,g,w,h,b,y,E+1)},N)}else A.json().then(function(V){var Y=_._checkStatusForError(A.status,V),oe={};Object.keys(A).forEach(function(B){oe[B]=A[B]}),oe.body=V,oe.statusCode=A.status,y(Y,oe,V)}).catch(function(){y(_._checkStatusForError(A.status))})}).catch(function(A){clearTimeout(k),y(A)})}i.exports=v},{"./abort-controller":1,"./exponential_backoff_with_jitter":6,"./fetch":7,"./object_to_query_param_string":11,"./package_version":12}],17:[function(t,i,c){var a=this&&this.__assign||function(){return a=Object.assign||function(w){for(var h,b=1,y=arguments.length;b<y;b++){h=arguments[b];for(var E in h)Object.prototype.hasOwnProperty.call(h,E)&&(w[E]=h[E])}return w},a.apply(this,arguments)},r=this&&this.__importDefault||function(w){return w&&w.__esModule?w:{default:w}},o=r(t("lodash/isPlainObject")),f=r(t("./deprecate")),l=r(t("./query")),p=t("./query_params"),d=r(t("./object_to_query_param_string")),v=r(t("./record")),_=r(t("./callback_to_promise")),g=function(){function w(h,b,y){if(!b&&!y)throw new Error("Table name or table ID is required");this._base=h,this.id=b,this.name=y,this.find=_.default(this._findRecordById,this),this.select=this._selectRecords.bind(this),this.create=_.default(this._createRecords,this),this.update=_.default(this._updateRecords.bind(this,!1),this),this.replace=_.default(this._updateRecords.bind(this,!0),this),this.destroy=_.default(this._destroyRecord,this),this.list=f.default(this._listRecords.bind(this),"table.list","Airtable: `list()` is deprecated. Use `select()` instead."),this.forEach=f.default(this._forEachRecord.bind(this),"table.forEach","Airtable: `forEach()` is deprecated. Use `select()` instead.")}return w.prototype._findRecordById=function(h,b){var y=new v.default(this,h);y.fetch(b)},w.prototype._selectRecords=function(h){if(h===void 0&&(h={}),arguments.length>1&&console.warn("Airtable: `select` takes only one parameter, but it was given "+arguments.length+" parameters. Use `eachPage` or `firstPage` to fetch records."),o.default(h)){var b=l.default.validateParams(h);if(b.errors.length){var y=b.errors.map(function(E){return"  * "+E});throw new Error("Airtable: invalid parameters for `select`:\n"+y.join(`
`))}return b.ignoredKeys.length&&console.warn("Airtable: the following parameters to `select` will be ignored: "+b.ignoredKeys.join(", ")),new l.default(this,b.validParams)}else throw new Error("Airtable: the parameter for `select` should be a plain object or undefined.")},w.prototype._urlEncodedNameOrId=function(){return this.id||encodeURIComponent(this.name)},w.prototype._createRecords=function(h,b,y){var E=this,x=Array.isArray(h);y||(y=b,b={});var T;x?T=a({records:h},b):T=a({fields:h},b),this._base.runAction("post","/"+this._urlEncodedNameOrId()+"/",{},T,function(j,I,P){if(j){y(j);return}var R;x?R=P.records.map(function(k){return new v.default(E,k.id,k)}):R=new v.default(E,P.id,P),y(null,R)})},w.prototype._updateRecords=function(h,b,y,E,x){var T=this,j;if(Array.isArray(b)){var I=b;j=o.default(y)?y:{},x=E||y;var P=h?"put":"patch",R=a({records:I},j);this._base.runAction(P,"/"+this._urlEncodedNameOrId()+"/",{},R,function(V,Y,oe){if(V){x(V);return}var B=oe.records.map(function(ee){return new v.default(T,ee.id,ee)});x(null,B)})}else{var k=b,A=y;j=o.default(E)?E:{},x=x||E;var N=new v.default(this,k);h?N.putUpdate(A,j,x):N.patchUpdate(A,j,x)}},w.prototype._destroyRecord=function(h,b){var y=this;if(Array.isArray(h)){var E={records:h};this._base.runAction("delete","/"+this._urlEncodedNameOrId(),E,null,function(T,j,I){if(T){b(T);return}var P=I.records.map(function(R){var k=R.id;return new v.default(y,k,null)});b(null,P)})}else{var x=new v.default(this,h);x.destroy(b)}},w.prototype._listRecords=function(h,b,y,E){var x=this;E||(E=y,y={});var T="/"+this._urlEncodedNameOrId()+"?"+d.default(y),j,I={},P=null,R;if(typeof y!="function"&&y.method==="post"||T.length>p.URL_CHARACTER_LENGTH_LIMIT){j="/"+this._urlEncodedNameOrId()+"/listRecords",P=a(a({},h&&{pageSize:h}),b&&{offset:b}),R="post";for(var k=Object.keys(y),A=0,N=k;A<N.length;A++){var V=N[A];p.shouldListRecordsParamBePassedAsParameter(V)?I[V]=y[V]:P[V]=y[V]}}else R="get",j="/"+this._urlEncodedNameOrId()+"/",I=a({limit:h,offset:b},y);this._base.runAction(R,j,I,P,function(Y,oe,B){if(Y){E(Y);return}var ee=B.records.map(function(W){return new v.default(x,null,W)});E(null,ee,B.offset)})},w.prototype._forEachRecord=function(h,b,y){var E=this;arguments.length===2&&(y=b,b=h,h={});var x=w.__recordsPerPageForIteration||100,T=null,j=function(){E._listRecords(x,T,h,function(I,P,R){if(I){y(I);return}for(var k=0;k<P.length;k++)b(P[k]);R?(T=R,j()):y()})};j()},w}();i.exports=g},{"./callback_to_promise":4,"./deprecate":5,"./object_to_query_param_string":11,"./query":13,"./query_params":14,"./record":15,"lodash/isPlainObject":89}],18:[function(t,i,c){function a(r,o){return function(f){return r(f)?{pass:!0}:{pass:!1,error:o}}}a.isOneOf=function(o){return o.includes.bind(o)},a.isArrayOf=function(r){return function(o){return Array.isArray(o)&&o.every(r)}},i.exports=a},{}],19:[function(t,i,c){Object.defineProperty(c,"__esModule",{value:!0});function a(x,T){if(!(x instanceof T))throw new TypeError("Cannot call a class as a function")}function r(x,T){for(var j=0;j<T.length;j++){var I=T[j];I.enumerable=I.enumerable||!1,I.configurable=!0,"value"in I&&(I.writable=!0),Object.defineProperty(x,I.key,I)}}function o(x,T,j){return T&&r(x.prototype,T),j&&r(x,j),x}function f(x,T){if(typeof T!="function"&&T!==null)throw new TypeError("Super expression must either be null or a function");x.prototype=Object.create(T&&T.prototype,{constructor:{value:x,writable:!0,configurable:!0}}),T&&p(x,T)}function l(x){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(j){return j.__proto__||Object.getPrototypeOf(j)},l(x)}function p(x,T){return p=Object.setPrototypeOf||function(I,P){return I.__proto__=P,I},p(x,T)}function d(x){if(x===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return x}function v(x,T){return T&&(typeof T=="object"||typeof T=="function")?T:d(x)}function _(x,T){for(;!Object.prototype.hasOwnProperty.call(x,T)&&(x=l(x),x!==null););return x}function g(x,T,j){return typeof Reflect<"u"&&Reflect.get?g=Reflect.get:g=function(P,R,k){var A=_(P,R);if(A){var N=Object.getOwnPropertyDescriptor(A,R);return N.get?N.get.call(k):N.value}},g(x,T,j||x)}var w=function(){function x(){a(this,x),Object.defineProperty(this,"listeners",{value:{},writable:!0,configurable:!0})}return o(x,[{key:"addEventListener",value:function(j,I){j in this.listeners||(this.listeners[j]=[]),this.listeners[j].push(I)}},{key:"removeEventListener",value:function(j,I){if(j in this.listeners){for(var P=this.listeners[j],R=0,k=P.length;R<k;R++)if(P[R]===I){P.splice(R,1);return}}}},{key:"dispatchEvent",value:function(j){var I=this;if(j.type in this.listeners){for(var P=function(V){setTimeout(function(){return V.call(I,j)})},R=this.listeners[j.type],k=0,A=R.length;k<A;k++)P(R[k]);return!j.defaultPrevented}}}]),x}(),h=function(x){f(T,x);function T(){var j;return a(this,T),j=v(this,l(T).call(this)),j.listeners||w.call(d(j)),Object.defineProperty(d(j),"aborted",{value:!1,writable:!0,configurable:!0}),Object.defineProperty(d(j),"onabort",{value:null,writable:!0,configurable:!0}),j}return o(T,[{key:"toString",value:function(){return"[object AbortSignal]"}},{key:"dispatchEvent",value:function(I){I.type==="abort"&&(this.aborted=!0,typeof this.onabort=="function"&&this.onabort.call(this,I)),g(l(T.prototype),"dispatchEvent",this).call(this,I)}}]),T}(w),b=function(){function x(){a(this,x),Object.defineProperty(this,"signal",{value:new h,writable:!0,configurable:!0})}return o(x,[{key:"abort",value:function(){var j;try{j=new Event("abort")}catch{typeof document<"u"?document.createEvent?(j=document.createEvent("Event"),j.initEvent("abort",!1,!1)):(j=document.createEventObject(),j.type="abort"):j={type:"abort",bubbles:!1,cancelable:!1}}this.signal.dispatchEvent(j)}},{key:"toString",value:function(){return"[object AbortController]"}}]),x}();typeof Symbol<"u"&&Symbol.toStringTag&&(b.prototype[Symbol.toStringTag]="AbortController",h.prototype[Symbol.toStringTag]="AbortSignal");function y(x){return x.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL?(console.log("__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL=true is set, will force install polyfill"),!0):typeof x.Request=="function"&&!x.Request.prototype.hasOwnProperty("signal")||!x.AbortController}function E(x){typeof x=="function"&&(x={fetch:x});var T=x,j=T.fetch,I=T.Request,P=I===void 0?j.Request:I,R=T.AbortController,k=T.__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL,A=k===void 0?!1:k;if(!y({fetch:j,Request:P,AbortController:R,__FORCE_INSTALL_ABORTCONTROLLER_POLYFILL:A}))return{fetch:j,Request:N};var N=P;(N&&!N.prototype.hasOwnProperty("signal")||A)&&(N=function(B,ee){var W;ee&&ee.signal&&(W=ee.signal,delete ee.signal);var X=new P(B,ee);return W&&Object.defineProperty(X,"signal",{writable:!1,enumerable:!1,configurable:!0,value:W}),X},N.prototype=P.prototype);var V=j,Y=function(B,ee){var W=N&&N.prototype.isPrototypeOf(B)?B.signal:ee?ee.signal:void 0;if(W){var X;try{X=new DOMException("Aborted","AbortError")}catch{X=new Error("Aborted"),X.name="AbortError"}if(W.aborted)return Promise.reject(X);var he=new Promise(function(me,le){W.addEventListener("abort",function(){return le(X)},{once:!0})});return ee&&ee.signal&&delete ee.signal,Promise.race([he,V(B,ee)])}return V(B,ee)};return{fetch:Y,Request:N}}c.AbortController=b,c.AbortSignal=h,c.abortableFetch=E},{}],20:[function(t,i,c){},{}],21:[function(t,i,c){var a=t("./_hashClear"),r=t("./_hashDelete"),o=t("./_hashGet"),f=t("./_hashHas"),l=t("./_hashSet");function p(d){var v=-1,_=d==null?0:d.length;for(this.clear();++v<_;){var g=d[v];this.set(g[0],g[1])}}p.prototype.clear=a,p.prototype.delete=r,p.prototype.get=o,p.prototype.has=f,p.prototype.set=l,i.exports=p},{"./_hashClear":46,"./_hashDelete":47,"./_hashGet":48,"./_hashHas":49,"./_hashSet":50}],22:[function(t,i,c){var a=t("./_listCacheClear"),r=t("./_listCacheDelete"),o=t("./_listCacheGet"),f=t("./_listCacheHas"),l=t("./_listCacheSet");function p(d){var v=-1,_=d==null?0:d.length;for(this.clear();++v<_;){var g=d[v];this.set(g[0],g[1])}}p.prototype.clear=a,p.prototype.delete=r,p.prototype.get=o,p.prototype.has=f,p.prototype.set=l,i.exports=p},{"./_listCacheClear":56,"./_listCacheDelete":57,"./_listCacheGet":58,"./_listCacheHas":59,"./_listCacheSet":60}],23:[function(t,i,c){var a=t("./_getNative"),r=t("./_root"),o=a(r,"Map");i.exports=o},{"./_getNative":42,"./_root":72}],24:[function(t,i,c){var a=t("./_mapCacheClear"),r=t("./_mapCacheDelete"),o=t("./_mapCacheGet"),f=t("./_mapCacheHas"),l=t("./_mapCacheSet");function p(d){var v=-1,_=d==null?0:d.length;for(this.clear();++v<_;){var g=d[v];this.set(g[0],g[1])}}p.prototype.clear=a,p.prototype.delete=r,p.prototype.get=o,p.prototype.has=f,p.prototype.set=l,i.exports=p},{"./_mapCacheClear":61,"./_mapCacheDelete":62,"./_mapCacheGet":63,"./_mapCacheHas":64,"./_mapCacheSet":65}],25:[function(t,i,c){var a=t("./_root"),r=a.Symbol;i.exports=r},{"./_root":72}],26:[function(t,i,c){var a=t("./_baseTimes"),r=t("./isArguments"),o=t("./isArray"),f=t("./isBuffer"),l=t("./_isIndex"),p=t("./isTypedArray"),d=Object.prototype,v=d.hasOwnProperty;function _(g,w){var h=o(g),b=!h&&r(g),y=!h&&!b&&f(g),E=!h&&!b&&!y&&p(g),x=h||b||y||E,T=x?a(g.length,String):[],j=T.length;for(var I in g)(w||v.call(g,I))&&!(x&&(I=="length"||y&&(I=="offset"||I=="parent")||E&&(I=="buffer"||I=="byteLength"||I=="byteOffset")||l(I,j)))&&T.push(I);return T}i.exports=_},{"./_baseTimes":35,"./_isIndex":51,"./isArguments":78,"./isArray":79,"./isBuffer":82,"./isTypedArray":92}],27:[function(t,i,c){function a(r,o){for(var f=-1,l=r==null?0:r.length,p=Array(l);++f<l;)p[f]=o(r[f],f,r);return p}i.exports=a},{}],28:[function(t,i,c){var a=t("./eq");function r(o,f){for(var l=o.length;l--;)if(a(o[l][0],f))return l;return-1}i.exports=r},{"./eq":76}],29:[function(t,i,c){var a=t("./_castPath"),r=t("./_toKey");function o(f,l){l=a(l,f);for(var p=0,d=l.length;f!=null&&p<d;)f=f[r(l[p++])];return p&&p==d?f:void 0}i.exports=o},{"./_castPath":38,"./_toKey":74}],30:[function(t,i,c){var a=t("./_Symbol"),r=t("./_getRawTag"),o=t("./_objectToString"),f="[object Null]",l="[object Undefined]",p=a?a.toStringTag:void 0;function d(v){return v==null?v===void 0?l:f:p&&p in Object(v)?r(v):o(v)}i.exports=d},{"./_Symbol":25,"./_getRawTag":44,"./_objectToString":70}],31:[function(t,i,c){var a=t("./_baseGetTag"),r=t("./isObjectLike"),o="[object Arguments]";function f(l){return r(l)&&a(l)==o}i.exports=f},{"./_baseGetTag":30,"./isObjectLike":88}],32:[function(t,i,c){var a=t("./isFunction"),r=t("./_isMasked"),o=t("./isObject"),f=t("./_toSource"),l=/[\\^$.*+?()[\]{}|]/g,p=/^\[object .+?Constructor\]$/,d=Function.prototype,v=Object.prototype,_=d.toString,g=v.hasOwnProperty,w=RegExp("^"+_.call(g).replace(l,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function h(b){if(!o(b)||r(b))return!1;var y=a(b)?w:p;return y.test(f(b))}i.exports=h},{"./_isMasked":54,"./_toSource":75,"./isFunction":83,"./isObject":87}],33:[function(t,i,c){var a=t("./_baseGetTag"),r=t("./isLength"),o=t("./isObjectLike"),f="[object Arguments]",l="[object Array]",p="[object Boolean]",d="[object Date]",v="[object Error]",_="[object Function]",g="[object Map]",w="[object Number]",h="[object Object]",b="[object RegExp]",y="[object Set]",E="[object String]",x="[object WeakMap]",T="[object ArrayBuffer]",j="[object DataView]",I="[object Float32Array]",P="[object Float64Array]",R="[object Int8Array]",k="[object Int16Array]",A="[object Int32Array]",N="[object Uint8Array]",V="[object Uint8ClampedArray]",Y="[object Uint16Array]",oe="[object Uint32Array]",B={};B[I]=B[P]=B[R]=B[k]=B[A]=B[N]=B[V]=B[Y]=B[oe]=!0,B[f]=B[l]=B[T]=B[p]=B[j]=B[d]=B[v]=B[_]=B[g]=B[w]=B[h]=B[b]=B[y]=B[E]=B[x]=!1;function ee(W){return o(W)&&r(W.length)&&!!B[a(W)]}i.exports=ee},{"./_baseGetTag":30,"./isLength":84,"./isObjectLike":88}],34:[function(t,i,c){var a=t("./_isPrototype"),r=t("./_nativeKeys"),o=Object.prototype,f=o.hasOwnProperty;function l(p){if(!a(p))return r(p);var d=[];for(var v in Object(p))f.call(p,v)&&v!="constructor"&&d.push(v);return d}i.exports=l},{"./_isPrototype":55,"./_nativeKeys":68}],35:[function(t,i,c){function a(r,o){for(var f=-1,l=Array(r);++f<r;)l[f]=o(f);return l}i.exports=a},{}],36:[function(t,i,c){var a=t("./_Symbol"),r=t("./_arrayMap"),o=t("./isArray"),f=t("./isSymbol"),l=1/0,p=a?a.prototype:void 0,d=p?p.toString:void 0;function v(_){if(typeof _=="string")return _;if(o(_))return r(_,v)+"";if(f(_))return d?d.call(_):"";var g=_+"";return g=="0"&&1/_==-l?"-0":g}i.exports=v},{"./_Symbol":25,"./_arrayMap":27,"./isArray":79,"./isSymbol":91}],37:[function(t,i,c){function a(r){return function(o){return r(o)}}i.exports=a},{}],38:[function(t,i,c){var a=t("./isArray"),r=t("./_isKey"),o=t("./_stringToPath"),f=t("./toString");function l(p,d){return a(p)?p:r(p,d)?[p]:o(f(p))}i.exports=l},{"./_isKey":52,"./_stringToPath":73,"./isArray":79,"./toString":96}],39:[function(t,i,c){var a=t("./_root"),r=a["__core-js_shared__"];i.exports=r},{"./_root":72}],40:[function(t,i,c){(function(a){var r=typeof a=="object"&&a&&a.Object===Object&&a;i.exports=r}).call(this,typeof rt<"u"?rt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],41:[function(t,i,c){var a=t("./_isKeyable");function r(o,f){var l=o.__data__;return a(f)?l[typeof f=="string"?"string":"hash"]:l.map}i.exports=r},{"./_isKeyable":53}],42:[function(t,i,c){var a=t("./_baseIsNative"),r=t("./_getValue");function o(f,l){var p=r(f,l);return a(p)?p:void 0}i.exports=o},{"./_baseIsNative":32,"./_getValue":45}],43:[function(t,i,c){var a=t("./_overArg"),r=a(Object.getPrototypeOf,Object);i.exports=r},{"./_overArg":71}],44:[function(t,i,c){var a=t("./_Symbol"),r=Object.prototype,o=r.hasOwnProperty,f=r.toString,l=a?a.toStringTag:void 0;function p(d){var v=o.call(d,l),_=d[l];try{d[l]=void 0;var g=!0}catch{}var w=f.call(d);return g&&(v?d[l]=_:delete d[l]),w}i.exports=p},{"./_Symbol":25}],45:[function(t,i,c){function a(r,o){return r==null?void 0:r[o]}i.exports=a},{}],46:[function(t,i,c){var a=t("./_nativeCreate");function r(){this.__data__=a?a(null):{},this.size=0}i.exports=r},{"./_nativeCreate":67}],47:[function(t,i,c){function a(r){var o=this.has(r)&&delete this.__data__[r];return this.size-=o?1:0,o}i.exports=a},{}],48:[function(t,i,c){var a=t("./_nativeCreate"),r="__lodash_hash_undefined__",o=Object.prototype,f=o.hasOwnProperty;function l(p){var d=this.__data__;if(a){var v=d[p];return v===r?void 0:v}return f.call(d,p)?d[p]:void 0}i.exports=l},{"./_nativeCreate":67}],49:[function(t,i,c){var a=t("./_nativeCreate"),r=Object.prototype,o=r.hasOwnProperty;function f(l){var p=this.__data__;return a?p[l]!==void 0:o.call(p,l)}i.exports=f},{"./_nativeCreate":67}],50:[function(t,i,c){var a=t("./_nativeCreate"),r="__lodash_hash_undefined__";function o(f,l){var p=this.__data__;return this.size+=this.has(f)?0:1,p[f]=a&&l===void 0?r:l,this}i.exports=o},{"./_nativeCreate":67}],51:[function(t,i,c){var a=9007199254740991,r=/^(?:0|[1-9]\d*)$/;function o(f,l){var p=typeof f;return l=l??a,!!l&&(p=="number"||p!="symbol"&&r.test(f))&&f>-1&&f%1==0&&f<l}i.exports=o},{}],52:[function(t,i,c){var a=t("./isArray"),r=t("./isSymbol"),o=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,f=/^\w*$/;function l(p,d){if(a(p))return!1;var v=typeof p;return v=="number"||v=="symbol"||v=="boolean"||p==null||r(p)?!0:f.test(p)||!o.test(p)||d!=null&&p in Object(d)}i.exports=l},{"./isArray":79,"./isSymbol":91}],53:[function(t,i,c){function a(r){var o=typeof r;return o=="string"||o=="number"||o=="symbol"||o=="boolean"?r!=="__proto__":r===null}i.exports=a},{}],54:[function(t,i,c){var a=t("./_coreJsData"),r=function(){var f=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return f?"Symbol(src)_1."+f:""}();function o(f){return!!r&&r in f}i.exports=o},{"./_coreJsData":39}],55:[function(t,i,c){var a=Object.prototype;function r(o){var f=o&&o.constructor,l=typeof f=="function"&&f.prototype||a;return o===l}i.exports=r},{}],56:[function(t,i,c){function a(){this.__data__=[],this.size=0}i.exports=a},{}],57:[function(t,i,c){var a=t("./_assocIndexOf"),r=Array.prototype,o=r.splice;function f(l){var p=this.__data__,d=a(p,l);if(d<0)return!1;var v=p.length-1;return d==v?p.pop():o.call(p,d,1),--this.size,!0}i.exports=f},{"./_assocIndexOf":28}],58:[function(t,i,c){var a=t("./_assocIndexOf");function r(o){var f=this.__data__,l=a(f,o);return l<0?void 0:f[l][1]}i.exports=r},{"./_assocIndexOf":28}],59:[function(t,i,c){var a=t("./_assocIndexOf");function r(o){return a(this.__data__,o)>-1}i.exports=r},{"./_assocIndexOf":28}],60:[function(t,i,c){var a=t("./_assocIndexOf");function r(o,f){var l=this.__data__,p=a(l,o);return p<0?(++this.size,l.push([o,f])):l[p][1]=f,this}i.exports=r},{"./_assocIndexOf":28}],61:[function(t,i,c){var a=t("./_Hash"),r=t("./_ListCache"),o=t("./_Map");function f(){this.size=0,this.__data__={hash:new a,map:new(o||r),string:new a}}i.exports=f},{"./_Hash":21,"./_ListCache":22,"./_Map":23}],62:[function(t,i,c){var a=t("./_getMapData");function r(o){var f=a(this,o).delete(o);return this.size-=f?1:0,f}i.exports=r},{"./_getMapData":41}],63:[function(t,i,c){var a=t("./_getMapData");function r(o){return a(this,o).get(o)}i.exports=r},{"./_getMapData":41}],64:[function(t,i,c){var a=t("./_getMapData");function r(o){return a(this,o).has(o)}i.exports=r},{"./_getMapData":41}],65:[function(t,i,c){var a=t("./_getMapData");function r(o,f){var l=a(this,o),p=l.size;return l.set(o,f),this.size+=l.size==p?0:1,this}i.exports=r},{"./_getMapData":41}],66:[function(t,i,c){var a=t("./memoize"),r=500;function o(f){var l=a(f,function(d){return p.size===r&&p.clear(),d}),p=l.cache;return l}i.exports=o},{"./memoize":94}],67:[function(t,i,c){var a=t("./_getNative"),r=a(Object,"create");i.exports=r},{"./_getNative":42}],68:[function(t,i,c){var a=t("./_overArg"),r=a(Object.keys,Object);i.exports=r},{"./_overArg":71}],69:[function(t,i,c){var a=t("./_freeGlobal"),r=typeof c=="object"&&c&&!c.nodeType&&c,o=r&&typeof i=="object"&&i&&!i.nodeType&&i,f=o&&o.exports===r,l=f&&a.process,p=function(){try{var d=o&&o.require&&o.require("util").types;return d||l&&l.binding&&l.binding("util")}catch{}}();i.exports=p},{"./_freeGlobal":40}],70:[function(t,i,c){var a=Object.prototype,r=a.toString;function o(f){return r.call(f)}i.exports=o},{}],71:[function(t,i,c){function a(r,o){return function(f){return r(o(f))}}i.exports=a},{}],72:[function(t,i,c){var a=t("./_freeGlobal"),r=typeof self=="object"&&self&&self.Object===Object&&self,o=a||r||Function("return this")();i.exports=o},{"./_freeGlobal":40}],73:[function(t,i,c){var a=t("./_memoizeCapped"),r=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,o=/\\(\\)?/g,f=a(function(l){var p=[];return l.charCodeAt(0)===46&&p.push(""),l.replace(r,function(d,v,_,g){p.push(_?g.replace(o,"$1"):v||d)}),p});i.exports=f},{"./_memoizeCapped":66}],74:[function(t,i,c){var a=t("./isSymbol"),r=1/0;function o(f){if(typeof f=="string"||a(f))return f;var l=f+"";return l=="0"&&1/f==-r?"-0":l}i.exports=o},{"./isSymbol":91}],75:[function(t,i,c){var a=Function.prototype,r=a.toString;function o(f){if(f!=null){try{return r.call(f)}catch{}try{return f+""}catch{}}return""}i.exports=o},{}],76:[function(t,i,c){function a(r,o){return r===o||r!==r&&o!==o}i.exports=a},{}],77:[function(t,i,c){var a=t("./_baseGet");function r(o,f,l){var p=o==null?void 0:a(o,f);return p===void 0?l:p}i.exports=r},{"./_baseGet":29}],78:[function(t,i,c){var a=t("./_baseIsArguments"),r=t("./isObjectLike"),o=Object.prototype,f=o.hasOwnProperty,l=o.propertyIsEnumerable,p=a(function(){return arguments}())?a:function(d){return r(d)&&f.call(d,"callee")&&!l.call(d,"callee")};i.exports=p},{"./_baseIsArguments":31,"./isObjectLike":88}],79:[function(t,i,c){var a=Array.isArray;i.exports=a},{}],80:[function(t,i,c){var a=t("./isFunction"),r=t("./isLength");function o(f){return f!=null&&r(f.length)&&!a(f)}i.exports=o},{"./isFunction":83,"./isLength":84}],81:[function(t,i,c){var a=t("./_baseGetTag"),r=t("./isObjectLike"),o="[object Boolean]";function f(l){return l===!0||l===!1||r(l)&&a(l)==o}i.exports=f},{"./_baseGetTag":30,"./isObjectLike":88}],82:[function(t,i,c){var a=t("./_root"),r=t("./stubFalse"),o=typeof c=="object"&&c&&!c.nodeType&&c,f=o&&typeof i=="object"&&i&&!i.nodeType&&i,l=f&&f.exports===o,p=l?a.Buffer:void 0,d=p?p.isBuffer:void 0,v=d||r;i.exports=v},{"./_root":72,"./stubFalse":95}],83:[function(t,i,c){var a=t("./_baseGetTag"),r=t("./isObject"),o="[object AsyncFunction]",f="[object Function]",l="[object GeneratorFunction]",p="[object Proxy]";function d(v){if(!r(v))return!1;var _=a(v);return _==f||_==l||_==o||_==p}i.exports=d},{"./_baseGetTag":30,"./isObject":87}],84:[function(t,i,c){var a=9007199254740991;function r(o){return typeof o=="number"&&o>-1&&o%1==0&&o<=a}i.exports=r},{}],85:[function(t,i,c){function a(r){return r==null}i.exports=a},{}],86:[function(t,i,c){var a=t("./_baseGetTag"),r=t("./isObjectLike"),o="[object Number]";function f(l){return typeof l=="number"||r(l)&&a(l)==o}i.exports=f},{"./_baseGetTag":30,"./isObjectLike":88}],87:[function(t,i,c){function a(r){var o=typeof r;return r!=null&&(o=="object"||o=="function")}i.exports=a},{}],88:[function(t,i,c){function a(r){return r!=null&&typeof r=="object"}i.exports=a},{}],89:[function(t,i,c){var a=t("./_baseGetTag"),r=t("./_getPrototype"),o=t("./isObjectLike"),f="[object Object]",l=Function.prototype,p=Object.prototype,d=l.toString,v=p.hasOwnProperty,_=d.call(Object);function g(w){if(!o(w)||a(w)!=f)return!1;var h=r(w);if(h===null)return!0;var b=v.call(h,"constructor")&&h.constructor;return typeof b=="function"&&b instanceof b&&d.call(b)==_}i.exports=g},{"./_baseGetTag":30,"./_getPrototype":43,"./isObjectLike":88}],90:[function(t,i,c){var a=t("./_baseGetTag"),r=t("./isArray"),o=t("./isObjectLike"),f="[object String]";function l(p){return typeof p=="string"||!r(p)&&o(p)&&a(p)==f}i.exports=l},{"./_baseGetTag":30,"./isArray":79,"./isObjectLike":88}],91:[function(t,i,c){var a=t("./_baseGetTag"),r=t("./isObjectLike"),o="[object Symbol]";function f(l){return typeof l=="symbol"||r(l)&&a(l)==o}i.exports=f},{"./_baseGetTag":30,"./isObjectLike":88}],92:[function(t,i,c){var a=t("./_baseIsTypedArray"),r=t("./_baseUnary"),o=t("./_nodeUtil"),f=o&&o.isTypedArray,l=f?r(f):a;i.exports=l},{"./_baseIsTypedArray":33,"./_baseUnary":37,"./_nodeUtil":69}],93:[function(t,i,c){var a=t("./_arrayLikeKeys"),r=t("./_baseKeys"),o=t("./isArrayLike");function f(l){return o(l)?a(l):r(l)}i.exports=f},{"./_arrayLikeKeys":26,"./_baseKeys":34,"./isArrayLike":80}],94:[function(t,i,c){var a=t("./_MapCache"),r="Expected a function";function o(f,l){if(typeof f!="function"||l!=null&&typeof l!="function")throw new TypeError(r);var p=function(){var d=arguments,v=l?l.apply(this,d):d[0],_=p.cache;if(_.has(v))return _.get(v);var g=f.apply(this,d);return p.cache=_.set(v,g)||_,g};return p.cache=new(o.Cache||a),p}o.Cache=a,i.exports=o},{"./_MapCache":24}],95:[function(t,i,c){function a(){return!1}i.exports=a},{}],96:[function(t,i,c){var a=t("./_baseToString");function r(o){return o==null?"":a(o)}i.exports=r},{"./_baseToString":36}],airtable:[function(t,i,c){var a=this&&this.__importDefault||function(d){return d&&d.__esModule?d:{default:d}},r=a(t("./base")),o=a(t("./record")),f=a(t("./table")),l=a(t("./airtable_error")),p=function(){function d(v){v===void 0&&(v={});var _=d.default_config(),g=v.apiVersion||d.apiVersion||_.apiVersion;if(Object.defineProperties(this,{_apiKey:{value:v.apiKey||d.apiKey||_.apiKey},_apiVersion:{value:g},_apiVersionMajor:{value:g.split(".")[0]},_customHeaders:{value:v.customHeaders||{}},_endpointUrl:{value:v.endpointUrl||d.endpointUrl||_.endpointUrl},_noRetryIfRateLimited:{value:v.noRetryIfRateLimited||d.noRetryIfRateLimited||_.noRetryIfRateLimited},_requestTimeout:{value:v.requestTimeout||d.requestTimeout||_.requestTimeout}}),!this._apiKey)throw new Error("An API key is required to connect to Airtable")}return d.prototype.base=function(v){return r.default.createFunctor(this,v)},d.default_config=function(){return{endpointUrl:"https://api.airtable.com",apiVersion:"0.1.0",apiKey:"",noRetryIfRateLimited:!1,requestTimeout:300*1e3}},d.configure=function(v){var _=v.apiKey,g=v.endpointUrl,w=v.apiVersion,h=v.noRetryIfRateLimited,b=v.requestTimeout;d.apiKey=_,d.endpointUrl=g,d.apiVersion=w,d.noRetryIfRateLimited=h,d.requestTimeout=b},d.base=function(v){return new d().base(v)},d.Base=r.default,d.Record=o.default,d.Table=f.default,d.Error=l.default,d}();i.exports=p},{"./airtable_error":2,"./base":3,"./record":15,"./table":17}]},{},["airtable"])("airtable")})})(xt);var Nr=xt.exports;const Fr=bt(Nr),Mr="欄位填答統計",vt="填答紀錄",qr="驗證紀錄",Ur="行為追蹤",wt=()=>{const{public:{airtableBase:Z,airtableKey:te}}=mt(),t=new Fr({apiKey:te}).base(Z);return{base:t,getPendingFields:f=>new Promise((l,p)=>{t(Mr).select({view:"尚待驗證"}).firstPage((d,v)=>{if(d){p(d);return}const _=v==null?void 0:v.filter(g=>{const w=g.get("相關填答者");return!w||!w.every(h=>h===f)});l(_)})}),getPendingVerifications:f=>new Promise((l,p)=>{t(vt).select({view:"待驗證紀錄"}).firstPage((d,v)=>{if(d){p(d);return}const _=v==null?void 0:v.filter(g=>(g.get("填答者暱稱")||"")!==f);l(_)})}),submitField:({userId:f,companyId:l,year:p,field:d,value:v,unit:_="",notes:g="",page:w=0,keyword:h=""})=>{const b={填答者暱稱:f,公司統編:l,報告書年份:p,欄位標籤:d,數值:v};return _&&(b.單位=_),g&&(b.補充資訊=g),w&&(b.答案頁次=w),h&&(b.答案關鍵字=h),new Promise((y,E)=>{t(vt).create([{fields:b}],(x,T)=>{x?E(x):y(T[0])})})},verifyField:({userId:f,submissionId:l,result:p})=>{const d={驗證者暱稱:f,填答紀錄:[l],驗證結果:p};return new Promise((v,_)=>{t(qr).create([{fields:d}],(g,w)=>{g?_(g):v(w[0])})})},sendTrackUsage:({userId:f,companyId:l,year:p,field:d,isOnVerify:v,searchKeyword:_,isPredefined:g=void 0,clickPages:w,viewPages:h,answerPage:b})=>{const y={填答者暱稱:f,公司統編:l,報告書年份:p,欄位標籤:d,是否為驗證時:v};return _&&(y.關鍵字=_),g!==void 0&&(y.是否自訂關鍵字=!g),w.length&&(y.點選過的頁次=w.join(",")),h.length&&(y.瀏覽過的頁次=h.join(",")),b&&(y.答案頁次=b),new Promise((E,x)=>{t(Ur).create([{fields:y}],(T,j)=>{T?x(T):E(j[0])})})}}},Br=[{category:"環境",fields:[{label:"是否根據 ISO 14064",type:"boolean",level:1,keywords:["14064"],notes:"14064是一個盤查溫室氣體的方法論，如果該公司有表示依照14064進行盤查，就算有。"},{label:"範疇一（值）",type:"number",keywords:["範疇一","類別一","溫室氣體","二氧化碳當量"],level:3,notes:"這題要抓的是溫室氣體排放量中，範疇一的排放。範圍是台灣全境的，需包含各工廠（若為國外工廠則不計），單位：公噸CO2e"},{label:"範疇二（值）",type:"number",level:3,keywords:["範疇二","類別二","溫室氣體","二氧化碳當量"],notes:"這題要抓的是溫室氣體排放量中，範疇二的排放。範圍是台灣全境的，需包含各工廠（若為國外工廠則不計），單位：公噸CO2e"},{label:"年度總用電量",type:"number",level:8,keywords:["外購電力","用電量","能源"],notes:"單位：度（KWh），只看電力／外購電力欄位，其他化石燃料的使用不計入喔。"},{label:"再生能源裝置容量",type:"number",level:3,keywords:["裝置容量","再生能源"],notes:"單位：KW ，可能是寫「沒有設置」。再生能源的範疇為太陽光電、風電、地熱等。"},{label:"總取水量",type:"number",level:3,keywords:["取水量","水資源"],notes:"單位：噸；要收的是企業用水量中，取自自然或人工的水（如自來水、地下水等）。"},{label:"耗用水量",type:"number",level:3,keywords:["耗用水","耗水量","水資源"],notes:"單位：噸；要收的是企業在生產過程中消耗掉的水資源，如果沒有明確資料，也可以用總取水量減掉排放水量。"},{label:"一般事業廢棄物",type:"number",level:1,keywords:["事業廢棄物","廢棄物"],notes:"單位：噸；不包含有害事業廢棄物喔，只收非有害的廢棄物量。"}]},{category:"社會",fields:[{label:"正式人員",type:"number",level:1,keywords:["正式","正職","不定期","人力","勞動"],notes:"要收的是該公司的正職人員喔。兼職的不計。"},{label:"男性正式員工",type:"number",level:1,keywords:["男性員工","人力","勞動"]},{label:"女性正式員工",type:"number",level:1,keywords:["女性員工","人力","勞動"]},{label:"新進人數",type:"number",level:1,keywords:["新進"]},{label:"離職人數",type:"number",level:1,keywords:["離職"]},{label:"職災事件數",type:"number",level:1,keywords:["職災","受傷","死亡"],notes:"單位：件數；多數公司會直接寫當年度發生幾起職災事件，造成幾人受傷／死亡。這邊收的是事件數喔。"},{label:"工安意外細節",type:"string",level:8,keywords:["火災","事故"],notes:"文字質性描述，例如「揭露南極工廠火災事件」；不是收職災事件喔，如果沒有資訊就請填「無相關資訊」。"}]},{category:"治理",fields:[{label:"營利事業所得稅繳納金額",type:"number",level:8,keywords:["所得稅","稅後","繳納","營收","支付政府款項"],notes:"單位：元；如果沒有直接寫繳納多少所得稅，也可以嘗試用「稅前淨利」減去「稅後淨利」來計算。"},{label:"是否揭露政府補助（GRI-201-4）",type:"boolean",level:5,keywords:["GRI 201","補貼","補助"],notes:"單位：元；這邊主要是想了解企業拿了多少的政府資助，通常會在GRI對照表中找得到，如果沒有就寫「無相關資訊」即可。"},{label:"研發經費投入金額",type:"number",level:3,keywords:["研發","研發費用"],notes:"單位：元；這邊想看的是企業投入多少研發經費喔。"},{label:"ISO 14001（環境管理系統）",type:"boolean",level:1,keywords:["14001"],notes:"填寫有無即可，企業若有使用就會明確寫依14001執行...。"},{label:"ISO 45001（職業安全衛生管理系統）",type:"boolean",level:1,keywords:["45001"],notes:"填寫有無即可，企業若有使用就會明確寫依45001執行...。"}]}],Gr=Br,$r={class:"onboardCrowd center mw7 pa4 mt5 br2 ba b--moon-gray lh-copy"},Kr={key:0,class:"onboardCrowd__init"},Vr=M("h1",{class:"mt0 f4 f3-ns"},"歡迎參與標記原型工具測試！",-1),Hr=M("p",null,[ge("接下來，我們將隨機挑選幾個 ESG 裡的重要欄位，例如碳排放、員工人數，請你協助從報告書中，找到答案。 另外，我們也會找一些其他人已經標記過的欄位，請你確認他們的標記是否正確。 這些欄位的難度不一，有些非常簡單，有些則需要費心判讀，所以如果發現找不到答案，請不要灰心，可以跳到下一題。"),M("strong",null,"在今天活動結束後，我們會計算所有人的積分，並且發放紀念品給前幾名的參與者。")],-1),zr=M("p",null,'由於測試需要閱讀 PDF，請盡量使用 12" 螢幕以上的裝置，才能順利操作標記工具。 如果你手邊的螢幕太小，也歡迎直接來找我們借用筆電。',-1),Jr=M("p",null,"在填答結束後，會請你填寫使用心得的問卷，問卷的填答資料，會以 CC0 的方式授權公開，請記得不要填寫敏感資訊 🥹。 最後，除了問卷外，也歡迎隨時找我們聊聊，提供你的使用心得，或是對於工具的建議。",-1),Yr=M("div",{class:"bb ph4 b--moon-gray mv4"},null,-1),Wr=["onSubmit"],Qr={class:"db mb3",for:"userId"},Xr=M("div",{class:"dark-gray f6 mb1"},"請輸入你的暱稱，作為統計積分計算使用",-1),Zr=["disabled"],en={key:1,class:"onboardCrowd__empty"},tn=M("h1",{class:"mt0 f4 f3-ns"},"所有題目都已經被標記完成！",-1),rn=M("p",null,"請期待本日的成果報告，或來找我們聊聊你的使用心得。",-1),nn=[tn,rn],an={key:2,class:"onboardCrowd__ready"},on=M("h1",{class:"mt0 f4 f3-ns"},"抽籤完成！以下是想請你協助標記的題目：",-1),sn={key:0,class:"mv3"},un=M("div",{class:"mb2 f4"},[ge("要"),M("strong",null,"標記"),ge("的報告書與欄位")],-1),cn={class:"flex-none mr2 fw5"},ln={class:"flex-auto b"},fn={key:1,class:"mv4"},dn=M("div",{class:"mb2 f4"},[ge("要"),M("strong",null,"驗證"),ge("的報告書與欄位")],-1),pn={class:"flex-none mr2 fw5"},hn={class:"flex-auto b"},_n=Ee({__name:"OnboardUser",emits:["userId","tasks"],setup(Z,{emit:te}){const t=wt(),i=ne(!0),c=ne(!1),a=ne(!1),r=ne(""),o=ne([]),f=ne([]),l=ye(()=>c.value?"機器人正在幫忙抽籤中... 🤖":"載入題庫"),p=ye(()=>r.value.length>0);async function d(){c.value=!0;let h=[];try{h=await t.getPendingFields(r.value)}catch(x){alert(x)}await new Promise(x=>{setTimeout(x,300+Math.random()*2e3)});let b=[];try{b=await t.getPendingVerifications(r.value)}catch(x){alert(x)}const y=g(h),E=_(b);i.value=!1,!y.length&&!E.length?a.value=!0:(o.value=y,f.value=E),c.value=!1}const v=Gr.flatMap(h=>h.fields.map(b=>({category:h.category,...b})));function _(h,b=6){const y=ve.shuffle(h.slice(0,b*3)),x=ve.uniq(y.map(j=>j.get("公司統編"))).reduce((j,I,P)=>(j[I]=P,j),{});return y.sort((j,I)=>x[j.get("公司統編")]-x[I.get("公司統編")]),y.slice(0,b).map(j=>{const I=Ge[0].reports.find(R=>R.id===j.get("公司統編")),P=v.find(R=>R.label===j.get("欄位標籤"));return{company:I,year:j.get("報告書年份"),data:j,...P}})}function g(h,b=2){const y=ve.shuffle(ve.uniq(h.map(N=>N.get("公司統編")))),E=Ge[0].year,x=Ge[0].reports.map(N=>N.id),T=ve.shuffle(ve.difference(x,y)),I=(T.length?T:y)[0],P=h.filter(N=>N.get("公司統編")===I).map(N=>N.get("欄位標籤")),R=ve.shuffle(ve.difference(v,P)),k=Ge[0].reports.find(N=>N.id===I);return R.slice(0,b).map(N=>({company:k,year:E,...N}))}function w(){te("userId",r.value),te("tasks",{submissions:o.value,verifications:f.value})}return(h,b)=>(Q(),ae("div",$r,[q(i)?(Q(),ae("div",Kr,[Vr,Hr,zr,Jr,Yr,M("form",{onSubmit:Ve(d,["prevent"])},[M("label",Qr,[Xr,Se(M("input",{"onUpdate:modelValue":b[0]||(b[0]=y=>yt(r)?r.value=y:null),type:"text"},null,512),[[Fe,q(r),void 0,{trim:!0}]])]),M("button",{class:"pv2 ph4",type:"submit",disabled:!q(p)||q(c)},ue(q(l)),9,Zr)],40,Wr)])):q(a)?(Q(),ae("div",en,nn)):(Q(),ae("div",an,[on,q(o).length?(Q(),ae("div",sn,[un,(Q(!0),ae(Me,null,qe(q(o),y=>(Q(),ae("div",{class:"flex items-center f6 gray",key:y.label},[M("div",cn,ue(y.company.name),1),M("div",ln,ue(y.category)+" | "+ue(y.label),1)]))),128))])):Ue("",!0),q(f).length?(Q(),ae("div",fn,[dn,(Q(!0),ae(Me,null,qe(q(f),y=>(Q(),ae("div",{class:"flex items-center f6 gray",key:y.label},[M("div",pn,ue(y.company.name),1),M("div",hn,ue(y.category)+" | "+ue(y.label),1)]))),128))])):Ue("",!0),M("button",{class:"pv2 ph4",onClick:w},"開始標記與驗證")]))]))}});var Ot={exports:{}};/*! algoliasearch.umd.js | 4.19.1 | © Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */(function(Z,te){(function(t,i){Z.exports=i()})(rt,function(){function t(e,n,s){return n in e?Object.defineProperty(e,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[n]=s,e}function i(e,n){var s=Object.keys(e);if(Object.getOwnPropertySymbols){var u=Object.getOwnPropertySymbols(e);n&&(u=u.filter(function(m){return Object.getOwnPropertyDescriptor(e,m).enumerable})),s.push.apply(s,u)}return s}function c(e){for(var n=1;n<arguments.length;n++){var s=arguments[n]!=null?arguments[n]:{};n%2?i(Object(s),!0).forEach(function(u){t(e,u,s[u])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(s)):i(Object(s)).forEach(function(u){Object.defineProperty(e,u,Object.getOwnPropertyDescriptor(s,u))})}return e}function a(e,n){if(e==null)return{};var s,u,m=function(D,O){if(D==null)return{};var C,F,L={},K=Object.keys(D);for(F=0;F<K.length;F++)C=K[F],O.indexOf(C)>=0||(L[C]=D[C]);return L}(e,n);if(Object.getOwnPropertySymbols){var S=Object.getOwnPropertySymbols(e);for(u=0;u<S.length;u++)s=S[u],n.indexOf(s)>=0||Object.prototype.propertyIsEnumerable.call(e,s)&&(m[s]=e[s])}return m}function r(e,n){return function(s){if(Array.isArray(s))return s}(e)||function(s,u){if(Symbol.iterator in Object(s)||Object.prototype.toString.call(s)==="[object Arguments]"){var m=[],S=!0,D=!1,O=void 0;try{for(var C,F=s[Symbol.iterator]();!(S=(C=F.next()).done)&&(m.push(C.value),!u||m.length!==u);S=!0);}catch(L){D=!0,O=L}finally{try{S||F.return==null||F.return()}finally{if(D)throw O}}return m}}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function o(e){return function(n){if(Array.isArray(n)){for(var s=0,u=new Array(n.length);s<n.length;s++)u[s]=n[s];return u}}(e)||function(n){if(Symbol.iterator in Object(n)||Object.prototype.toString.call(n)==="[object Arguments]")return Array.from(n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function f(e){var n,s="algoliasearch-client-js-".concat(e.key),u=function(){return n===void 0&&(n=e.localStorage||window.localStorage),n},m=function(){return JSON.parse(u().getItem(s)||"{}")},S=function(O){u().setItem(s,JSON.stringify(O))},D=function(){var O=e.timeToLive?1e3*e.timeToLive:null,C=m(),F=Object.fromEntries(Object.entries(C).filter(function(K){return r(K,2)[1].timestamp!==void 0}));if(S(F),O){var L=Object.fromEntries(Object.entries(F).filter(function(K){var $=r(K,2)[1],z=new Date().getTime();return!($.timestamp+O<z)}));S(L)}};return{get:function(O,C){var F=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){D();var L=JSON.stringify(O);return m()[L]}).then(function(L){return Promise.all([L?L.value:C(),L!==void 0])}).then(function(L){var K=r(L,2),$=K[0],z=K[1];return Promise.all([$,z||F.miss($)])}).then(function(L){return r(L,1)[0]})},set:function(O,C){return Promise.resolve().then(function(){var F=m();return F[JSON.stringify(O)]={timestamp:new Date().getTime(),value:C},u().setItem(s,JSON.stringify(F)),C})},delete:function(O){return Promise.resolve().then(function(){var C=m();delete C[JSON.stringify(O)],u().setItem(s,JSON.stringify(C))})},clear:function(){return Promise.resolve().then(function(){u().removeItem(s)})}}}function l(e){var n=o(e.caches),s=n.shift();return s===void 0?{get:function(u,m){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},D=m();return D.then(function(O){return Promise.all([O,S.miss(O)])}).then(function(O){return r(O,1)[0]})},set:function(u,m){return Promise.resolve(m)},delete:function(u){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(u,m){var S=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return s.get(u,m,S).catch(function(){return l({caches:n}).get(u,m,S)})},set:function(u,m){return s.set(u,m).catch(function(){return l({caches:n}).set(u,m)})},delete:function(u){return s.delete(u).catch(function(){return l({caches:n}).delete(u)})},clear:function(){return s.clear().catch(function(){return l({caches:n}).clear()})}}}function p(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},n={};return{get:function(s,u){var m=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},S=JSON.stringify(s);if(S in n)return Promise.resolve(e.serializable?JSON.parse(n[S]):n[S]);var D=u(),O=m&&m.miss||function(){return Promise.resolve()};return D.then(function(C){return O(C)}).then(function(){return D})},set:function(s,u){return n[JSON.stringify(s)]=e.serializable?JSON.stringify(u):u,Promise.resolve(u)},delete:function(s){return delete n[JSON.stringify(s)],Promise.resolve()},clear:function(){return n={},Promise.resolve()}}}function d(e,n,s){var u={"x-algolia-api-key":s,"x-algolia-application-id":n};return{headers:function(){return e===b.WithinHeaders?u:{}},queryParameters:function(){return e===b.WithinQueryParameters?u:{}}}}function v(e){var n=0;return e(function s(){return n++,new Promise(function(u){setTimeout(function(){u(e(s))},Math.min(100*n,1e3))})})}function _(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(s,u){return Promise.resolve()};return Object.assign(e,{wait:function(s){return _(e.then(function(u){return Promise.all([n(u,s),u])}).then(function(u){return u[1]}))}})}function g(e){for(var n=e.length-1;n>0;n--){var s=Math.floor(Math.random()*(n+1)),u=e[n];e[n]=e[s],e[s]=u}return e}function w(e,n){return n&&Object.keys(n).forEach(function(s){e[s]=n[s](e)}),e}function h(e){for(var n=arguments.length,s=new Array(n>1?n-1:0),u=1;u<n;u++)s[u-1]=arguments[u];var m=0;return e.replace(/%s/g,function(){return encodeURIComponent(s[m++])})}var b={WithinQueryParameters:0,WithinHeaders:1};function y(e,n){var s=e||{},u=s.data||{};return Object.keys(s).forEach(function(m){["timeout","headers","queryParameters","data","cacheable"].indexOf(m)===-1&&(u[m]=s[m])}),{data:Object.entries(u).length>0?u:void 0,timeout:s.timeout||n,headers:s.headers||{},queryParameters:s.queryParameters||{},cacheable:s.cacheable}}var E={Read:1,Write:2,Any:3},x=1,T=2,j=3;function I(e){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:x;return c(c({},e),{},{status:n,lastUpdate:Date.now()})}function P(e){return typeof e=="string"?{protocol:"https",url:e,accept:E.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||E.Any}}var R="DELETE",k="GET",A="POST",N="PUT";function V(e,n){return Promise.all(n.map(function(s){return e.get(s,function(){return Promise.resolve(I(s))})})).then(function(s){var u=s.filter(function(D){return function(O){return O.status===x||Date.now()-O.lastUpdate>12e4}(D)}),m=s.filter(function(D){return function(O){return O.status===j&&Date.now()-O.lastUpdate<=12e4}(D)}),S=[].concat(o(u),o(m));return{getTimeout:function(D,O){return(m.length===0&&D===0?1:m.length+3+D)*O},statelessHosts:S.length>0?S.map(function(D){return P(D)}):n}})}function Y(e,n,s,u){var m=[],S=function($,z){if(!($.method===k||$.data===void 0&&z.data===void 0)){var H=Array.isArray($.data)?$.data:c(c({},$.data),z.data);return JSON.stringify(H)}}(s,u),D=function($,z){var H=c(c({},$.headers),z.headers),re={};return Object.keys(H).forEach(function(se){var de=H[se];re[se.toLowerCase()]=de}),re}(e,u),O=s.method,C=s.method!==k?{}:c(c({},s.data),u.data),F=c(c(c({"x-algolia-agent":e.userAgent.value},e.queryParameters),C),u.queryParameters),L=0,K=function $(z,H){var re=z.pop();if(re===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:X(m)};var se={data:S,headers:D,method:O,url:ee(re,s.path,F),connectTimeout:H(L,e.timeouts.connect),responseTimeout:H(L,u.timeout)},de=function(pe){var ce={request:se,response:pe,host:re,triesLeft:z.length};return m.push(ce),ce},Le={onSuccess:function(pe){return function(ce){try{return JSON.parse(ce.content)}catch(we){throw function(xe,Ie){return{name:"DeserializationError",message:xe,response:Ie}}(we.message,ce)}}(pe)},onRetry:function(pe){var ce=de(pe);return pe.isTimedOut&&L++,Promise.all([e.logger.info("Retryable failure",he(ce)),e.hostsCache.set(re,I(re,pe.isTimedOut?j:T))]).then(function(){return $(z,H)})},onFail:function(pe){throw de(pe),function(ce,we){var xe=ce.content,Ie=ce.status,Ne=xe;try{Ne=JSON.parse(xe).message}catch{}return function(Be,tt,jr){return{name:"ApiError",message:Be,status:tt,transporterStackTrace:jr}}(Ne,Ie,we)}(pe,X(m))}};return e.requester.send(se).then(function(pe){return function(ce,we){return function(xe){var Ie=xe.status;return xe.isTimedOut||function(Ne){var Be=Ne.isTimedOut,tt=Ne.status;return!Be&&~~tt==0}(xe)||~~(Ie/100)!=2&&~~(Ie/100)!=4}(ce)?we.onRetry(ce):~~(ce.status/100)==2?we.onSuccess(ce):we.onFail(ce)}(pe,Le)})};return V(e.hostsCache,n).then(function($){return K(o($.statelessHosts).reverse(),$.getTimeout)})}function oe(e){var n=e.hostsCache,s=e.logger,u=e.requester,m=e.requestsCache,S=e.responsesCache,D=e.timeouts,O=e.userAgent,C=e.hosts,F=e.queryParameters,L={hostsCache:n,logger:s,requester:u,requestsCache:m,responsesCache:S,timeouts:D,userAgent:O,headers:e.headers,queryParameters:F,hosts:C.map(function(K){return P(K)}),read:function(K,$){var z=y($,L.timeouts.read),H=function(){return Y(L,L.hosts.filter(function(se){return(se.accept&E.Read)!=0}),K,z)};if((z.cacheable!==void 0?z.cacheable:K.cacheable)!==!0)return H();var re={request:K,mappedRequestOptions:z,transporter:{queryParameters:L.queryParameters,headers:L.headers}};return L.responsesCache.get(re,function(){return L.requestsCache.get(re,function(){return L.requestsCache.set(re,H()).then(function(se){return Promise.all([L.requestsCache.delete(re),se])},function(se){return Promise.all([L.requestsCache.delete(re),Promise.reject(se)])}).then(function(se){var de=r(se,2);return de[0],de[1]})})},{miss:function(se){return L.responsesCache.set(re,se)}})},write:function(K,$){return Y(L,L.hosts.filter(function(z){return(z.accept&E.Write)!=0}),K,y($,L.timeouts.write))}};return L}function B(e){var n={value:"Algolia for JavaScript (".concat(e,")"),add:function(s){var u="; ".concat(s.segment).concat(s.version!==void 0?" (".concat(s.version,")"):"");return n.value.indexOf(u)===-1&&(n.value="".concat(n.value).concat(u)),n}};return n}function ee(e,n,s){var u=W(s),m="".concat(e.protocol,"://").concat(e.url,"/").concat(n.charAt(0)==="/"?n.substr(1):n);return u.length&&(m+="?".concat(u)),m}function W(e){return Object.keys(e).map(function(n){return h("%s=%s",n,(s=e[n],Object.prototype.toString.call(s)==="[object Object]"||Object.prototype.toString.call(s)==="[object Array]"?JSON.stringify(e[n]):e[n]));var s}).join("&")}function X(e){return e.map(function(n){return he(n)})}function he(e){var n=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return c(c({},e),{},{request:c(c({},e.request),{},{headers:c(c({},e.request.headers),n)})})}var me=function(e){return function(n,s){return e.transporter.write({method:A,path:"2/abtests",data:n},s)}},le=function(e){return function(n,s){return e.transporter.write({method:R,path:h("2/abtests/%s",n)},s)}},_e=function(e){return function(n,s){return e.transporter.read({method:k,path:h("2/abtests/%s",n)},s)}},ze=function(e){return function(n){return e.transporter.read({method:k,path:"2/abtests"},n)}},Je=function(e){return function(n,s){return e.transporter.write({method:A,path:h("2/abtests/%s/stop",n)},s)}},G=function(e){return function(n){return e.transporter.read({method:k,path:"1/strategies/personalization"},n)}},J=function(e){return function(n,s){return e.transporter.write({method:A,path:"1/strategies/personalization",data:n},s)}};function U(e){return function n(s){return e.request(s).then(function(u){if(e.batch!==void 0&&e.batch(u.hits),!e.shouldStop(u))return u.cursor?n({cursor:u.cursor}):n({page:(s.page||0)+1})})}({})}var fe=function(e){return function(n,s){var u=s||{},m=u.queryParameters,S=a(u,["queryParameters"]),D=c({acl:n},m!==void 0?{queryParameters:m}:{});return _(e.transporter.write({method:A,path:"1/keys",data:D},S),function(O,C){return v(function(F){return Ce(e)(O.key,C).catch(function(L){if(L.status!==404)throw L;return F()})})})}},Oe=function(e){return function(n,s,u){var m=y(u);return m.queryParameters["X-Algolia-User-ID"]=n,e.transporter.write({method:A,path:"1/clusters/mapping",data:{cluster:s}},m)}},Te=function(e){return function(n,s,u){return e.transporter.write({method:A,path:"1/clusters/mapping/batch",data:{users:n,cluster:s}},u)}},Re=function(e){return function(n,s){return _(e.transporter.write({method:A,path:h("/1/dictionaries/%s/batch",n),data:{clearExistingDictionaryEntries:!0,requests:{action:"addEntry",body:[]}}},s),function(u,m){return Pe(e)(u.taskID,m)})}},be=function(e){return function(n,s,u){return _(e.transporter.write({method:A,path:h("1/indexes/%s/operation",n),data:{operation:"copy",destination:s}},u),function(m,S){return De(e)(n,{methods:{waitTask:ie}}).waitTask(m.taskID,S)})}},Ye=function(e){return function(n,s,u){return be(e)(n,s,c(c({},u),{},{scope:[et.Rules]}))}},Pt=function(e){return function(n,s,u){return be(e)(n,s,c(c({},u),{},{scope:[et.Settings]}))}},jt=function(e){return function(n,s,u){return be(e)(n,s,c(c({},u),{},{scope:[et.Synonyms]}))}},It=function(e){return function(n,s){return n.method===k?e.transporter.read(n,s):e.transporter.write(n,s)}},At=function(e){return function(n,s){return _(e.transporter.write({method:R,path:h("1/keys/%s",n)},s),function(u,m){return v(function(S){return Ce(e)(n,m).then(S).catch(function(D){if(D.status!==404)throw D})})})}},St=function(e){return function(n,s,u){var m=s.map(function(S){return{action:"deleteEntry",body:{objectID:S}}});return _(e.transporter.write({method:A,path:h("/1/dictionaries/%s/batch",n),data:{clearExistingDictionaryEntries:!1,requests:m}},u),function(S,D){return Pe(e)(S.taskID,D)})}},Ce=function(e){return function(n,s){return e.transporter.read({method:k,path:h("1/keys/%s",n)},s)}},nt=function(e){return function(n,s){return e.transporter.read({method:k,path:h("1/task/%s",n.toString())},s)}},kt=function(e){return function(n){return e.transporter.read({method:k,path:"/1/dictionaries/*/settings"},n)}},Et=function(e){return function(n){return e.transporter.read({method:k,path:"1/logs"},n)}},Rt=function(e){return function(n){return e.transporter.read({method:k,path:"1/clusters/mapping/top"},n)}},Ct=function(e){return function(n,s){return e.transporter.read({method:k,path:h("1/clusters/mapping/%s",n)},s)}},Dt=function(e){return function(n){var s=n||{},u=s.retrieveMappings,m=a(s,["retrieveMappings"]);return u===!0&&(m.getClusters=!0),e.transporter.read({method:k,path:"1/clusters/mapping/pending"},m)}},De=function(e){return function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},u={transporter:e.transporter,appId:e.appId,indexName:n};return w(u,s.methods)}},Lt=function(e){return function(n){return e.transporter.read({method:k,path:"1/keys"},n)}},Nt=function(e){return function(n){return e.transporter.read({method:k,path:"1/clusters"},n)}},Ft=function(e){return function(n){return e.transporter.read({method:k,path:"1/indexes"},n)}},Mt=function(e){return function(n){return e.transporter.read({method:k,path:"1/clusters/mapping"},n)}},qt=function(e){return function(n,s,u){return _(e.transporter.write({method:A,path:h("1/indexes/%s/operation",n),data:{operation:"move",destination:s}},u),function(m,S){return De(e)(n,{methods:{waitTask:ie}}).waitTask(m.taskID,S)})}},Ut=function(e){return function(n,s){return _(e.transporter.write({method:A,path:"1/indexes/*/batch",data:{requests:n}},s),function(u,m){return Promise.all(Object.keys(u.taskID).map(function(S){return De(e)(S,{methods:{waitTask:ie}}).waitTask(u.taskID[S],m)}))})}},Bt=function(e){return function(n,s){return e.transporter.read({method:A,path:"1/indexes/*/objects",data:{requests:n}},s)}},at=function(e){return function(n,s){var u=n.map(function(m){return c(c({},m),{},{params:W(m.params||{})})});return e.transporter.read({method:A,path:"1/indexes/*/queries",data:{requests:u},cacheable:!0},s)}},ot=function(e){return function(n,s){return Promise.all(n.map(function(u){var m=u.params,S=m.facetName,D=m.facetQuery,O=a(m,["facetName","facetQuery"]);return De(e)(u.indexName,{methods:{searchForFacetValues:ft}}).searchForFacetValues(S,D,c(c({},s),O))}))}},Gt=function(e){return function(n,s){var u=y(s);return u.queryParameters["X-Algolia-User-ID"]=n,e.transporter.write({method:R,path:"1/clusters/mapping"},u)}},$t=function(e){return function(n,s,u){var m=s.map(function(S){return{action:"addEntry",body:S}});return _(e.transporter.write({method:A,path:h("/1/dictionaries/%s/batch",n),data:{clearExistingDictionaryEntries:!0,requests:m}},u),function(S,D){return Pe(e)(S.taskID,D)})}},Kt=function(e){return function(n,s){return _(e.transporter.write({method:A,path:h("1/keys/%s/restore",n)},s),function(u,m){return v(function(S){return Ce(e)(n,m).catch(function(D){if(D.status!==404)throw D;return S()})})})}},Vt=function(e){return function(n,s,u){var m=s.map(function(S){return{action:"addEntry",body:S}});return _(e.transporter.write({method:A,path:h("/1/dictionaries/%s/batch",n),data:{clearExistingDictionaryEntries:!1,requests:m}},u),function(S,D){return Pe(e)(S.taskID,D)})}},Ht=function(e){return function(n,s,u){return e.transporter.read({method:A,path:h("/1/dictionaries/%s/search",n),data:{query:s},cacheable:!0},u)}},zt=function(e){return function(n,s){return e.transporter.read({method:A,path:"1/clusters/mapping/search",data:{query:n}},s)}},Jt=function(e){return function(n,s){return _(e.transporter.write({method:N,path:"/1/dictionaries/*/settings",data:n},s),function(u,m){return Pe(e)(u.taskID,m)})}},Yt=function(e){return function(n,s){var u=Object.assign({},s),m=s||{},S=m.queryParameters,D=a(m,["queryParameters"]),O=S?{queryParameters:S}:{},C=["acl","indexes","referers","restrictSources","queryParameters","description","maxQueriesPerIPPerHour","maxHitsPerQuery"];return _(e.transporter.write({method:N,path:h("1/keys/%s",n),data:O},D),function(F,L){return v(function(K){return Ce(e)(n,L).then(function($){return function(z){return Object.keys(u).filter(function(H){return C.indexOf(H)!==-1}).every(function(H){if(Array.isArray(z[H])&&Array.isArray(u[H])){var re=z[H];return re.length===u[H].length&&re.every(function(se,de){return se===u[H][de]})}return z[H]===u[H]})}($)?Promise.resolve():K()})})})}},Pe=function(e){return function(n,s){return v(function(u){return nt(e)(n,s).then(function(m){return m.status!=="published"?u():void 0})})}},st=function(e){return function(n,s){return _(e.transporter.write({method:A,path:h("1/indexes/%s/batch",e.indexName),data:{requests:n}},s),function(u,m){return ie(e)(u.taskID,m)})}},Wt=function(e){return function(n){return U(c(c({shouldStop:function(s){return s.cursor===void 0}},n),{},{request:function(s){return e.transporter.read({method:A,path:h("1/indexes/%s/browse",e.indexName),data:s},n)}}))}},Qt=function(e){return function(n){var s=c({hitsPerPage:1e3},n);return U(c(c({shouldStop:function(u){return u.hits.length<s.hitsPerPage}},s),{},{request:function(u){return dt(e)("",c(c({},s),u)).then(function(m){return c(c({},m),{},{hits:m.hits.map(function(S){return delete S._highlightResult,S})})})}}))}},Xt=function(e){return function(n){var s=c({hitsPerPage:1e3},n);return U(c(c({shouldStop:function(u){return u.hits.length<s.hitsPerPage}},s),{},{request:function(u){return pt(e)("",c(c({},s),u)).then(function(m){return c(c({},m),{},{hits:m.hits.map(function(S){return delete S._highlightResult,S})})})}}))}},We=function(e){return function(n,s,u){var m=u||{},S=m.batchSize,D=a(m,["batchSize"]),O={taskIDs:[],objectIDs:[]};return _(function C(){var F,L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,K=[];for(F=L;F<n.length&&(K.push(n[F]),K.length!==(S||1e3));F++);return K.length===0?Promise.resolve(O):st(e)(K.map(function($){return{action:s,body:$}}),D).then(function($){return O.objectIDs=O.objectIDs.concat($.objectIDs),O.taskIDs.push($.taskID),F++,C(F)})}(),function(C,F){return Promise.all(C.taskIDs.map(function(L){return ie(e)(L,F)}))})}},Zt=function(e){return function(n){return _(e.transporter.write({method:A,path:h("1/indexes/%s/clear",e.indexName)},n),function(s,u){return ie(e)(s.taskID,u)})}},er=function(e){return function(n){var s=n||{},u=s.forwardToReplicas,m=y(a(s,["forwardToReplicas"]));return u&&(m.queryParameters.forwardToReplicas=1),_(e.transporter.write({method:A,path:h("1/indexes/%s/rules/clear",e.indexName)},m),function(S,D){return ie(e)(S.taskID,D)})}},tr=function(e){return function(n){var s=n||{},u=s.forwardToReplicas,m=y(a(s,["forwardToReplicas"]));return u&&(m.queryParameters.forwardToReplicas=1),_(e.transporter.write({method:A,path:h("1/indexes/%s/synonyms/clear",e.indexName)},m),function(S,D){return ie(e)(S.taskID,D)})}},rr=function(e){return function(n,s){return _(e.transporter.write({method:A,path:h("1/indexes/%s/deleteByQuery",e.indexName),data:n},s),function(u,m){return ie(e)(u.taskID,m)})}},nr=function(e){return function(n){return _(e.transporter.write({method:R,path:h("1/indexes/%s",e.indexName)},n),function(s,u){return ie(e)(s.taskID,u)})}},ar=function(e){return function(n,s){return _(it(e)([n],s).then(function(u){return{taskID:u.taskIDs[0]}}),function(u,m){return ie(e)(u.taskID,m)})}},it=function(e){return function(n,s){var u=n.map(function(m){return{objectID:m}});return We(e)(u,je.DeleteObject,s)}},or=function(e){return function(n,s){var u=s||{},m=u.forwardToReplicas,S=y(a(u,["forwardToReplicas"]));return m&&(S.queryParameters.forwardToReplicas=1),_(e.transporter.write({method:R,path:h("1/indexes/%s/rules/%s",e.indexName,n)},S),function(D,O){return ie(e)(D.taskID,O)})}},sr=function(e){return function(n,s){var u=s||{},m=u.forwardToReplicas,S=y(a(u,["forwardToReplicas"]));return m&&(S.queryParameters.forwardToReplicas=1),_(e.transporter.write({method:R,path:h("1/indexes/%s/synonyms/%s",e.indexName,n)},S),function(D,O){return ie(e)(D.taskID,O)})}},ir=function(e){return function(n){return ut(e)(n).then(function(){return!0}).catch(function(s){if(s.status!==404)throw s;return!1})}},ur=function(e){return function(n,s,u){return e.transporter.read({method:A,path:h("1/answers/%s/prediction",e.indexName),data:{query:n,queryLanguages:s},cacheable:!0},u)}},cr=function(e){return function(n,s){var u=s||{},m=u.query,S=u.paginate,D=a(u,["query","paginate"]),O=0;return function C(){return lt(e)(m||"",c(c({},D),{},{page:O})).then(function(F){for(var L=0,K=Object.entries(F.hits);L<K.length;L++){var $=r(K[L],2),z=$[0],H=$[1];if(n(H))return{object:H,position:parseInt(z,10),page:O}}if(O++,S===!1||O>=F.nbPages)throw{name:"ObjectNotFoundError",message:"Object not found."};return C()})}()}},lr=function(e){return function(n,s){return e.transporter.read({method:k,path:h("1/indexes/%s/%s",e.indexName,n)},s)}},fr=function(){return function(e,n){for(var s=0,u=Object.entries(e.hits);s<u.length;s++){var m=r(u[s],2),S=m[0];if(m[1].objectID===n)return parseInt(S,10)}return-1}},dr=function(e){return function(n,s){var u=s||{},m=u.attributesToRetrieve,S=a(u,["attributesToRetrieve"]),D=n.map(function(O){return c({indexName:e.indexName,objectID:O},m?{attributesToRetrieve:m}:{})});return e.transporter.read({method:A,path:"1/indexes/*/objects",data:{requests:D}},S)}},pr=function(e){return function(n,s){return e.transporter.read({method:k,path:h("1/indexes/%s/rules/%s",e.indexName,n)},s)}},ut=function(e){return function(n){return e.transporter.read({method:k,path:h("1/indexes/%s/settings",e.indexName),data:{getVersion:2}},n)}},hr=function(e){return function(n,s){return e.transporter.read({method:k,path:h("1/indexes/%s/synonyms/%s",e.indexName,n)},s)}},_r=function(e){return function(n,s){return _(ct(e)([n],s).then(function(u){return{objectID:u.objectIDs[0],taskID:u.taskIDs[0]}}),function(u,m){return ie(e)(u.taskID,m)})}},ct=function(e){return function(n,s){var u=s||{},m=u.createIfNotExists,S=a(u,["createIfNotExists"]),D=m?je.PartialUpdateObject:je.PartialUpdateObjectNoCreate;return We(e)(n,D,S)}},vr=function(e){return function(n,s){var u=s||{},m=u.safe,S=u.autoGenerateObjectIDIfNotExist,D=u.batchSize,O=a(u,["safe","autoGenerateObjectIDIfNotExist","batchSize"]),C=function(H,re,se,de){return _(e.transporter.write({method:A,path:h("1/indexes/%s/operation",H),data:{operation:se,destination:re}},de),function(Le,pe){return ie(e)(Le.taskID,pe)})},F=Math.random().toString(36).substring(7),L="".concat(e.indexName,"_tmp_").concat(F),K=Qe({appId:e.appId,transporter:e.transporter,indexName:L}),$=[],z=C(e.indexName,L,"copy",c(c({},O),{},{scope:["settings","synonyms","rules"]}));return $.push(z),_((m?z.wait(O):z).then(function(){var H=K(n,c(c({},O),{},{autoGenerateObjectIDIfNotExist:S,batchSize:D}));return $.push(H),m?H.wait(O):H}).then(function(){var H=C(L,e.indexName,"move",O);return $.push(H),m?H.wait(O):H}).then(function(){return Promise.all($)}).then(function(H){var re=r(H,3),se=re[0],de=re[1],Le=re[2];return{objectIDs:de.objectIDs,taskIDs:[se.taskID].concat(o(de.taskIDs),[Le.taskID])}}),function(H,re){return Promise.all($.map(function(se){return se.wait(re)}))})}},mr=function(e){return function(n,s){return Xe(e)(n,c(c({},s),{},{clearExistingRules:!0}))}},yr=function(e){return function(n,s){return Ze(e)(n,c(c({},s),{},{clearExistingSynonyms:!0}))}},gr=function(e){return function(n,s){return _(Qe(e)([n],s).then(function(u){return{objectID:u.objectIDs[0],taskID:u.taskIDs[0]}}),function(u,m){return ie(e)(u.taskID,m)})}},Qe=function(e){return function(n,s){var u=s||{},m=u.autoGenerateObjectIDIfNotExist,S=a(u,["autoGenerateObjectIDIfNotExist"]),D=m?je.AddObject:je.UpdateObject;if(D===je.UpdateObject){var O=!0,C=!1,F=void 0;try{for(var L,K=n[Symbol.iterator]();!(O=(L=K.next()).done);O=!0)if(L.value.objectID===void 0)return _(Promise.reject({name:"MissingObjectIDError",message:"All objects must have an unique objectID (like a primary key) to be valid. Algolia is also able to generate objectIDs automatically but *it's not recommended*. To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option."}))}catch($){C=!0,F=$}finally{try{O||K.return==null||K.return()}finally{if(C)throw F}}}return We(e)(n,D,S)}},br=function(e){return function(n,s){return Xe(e)([n],s)}},Xe=function(e){return function(n,s){var u=s||{},m=u.forwardToReplicas,S=u.clearExistingRules,D=y(a(u,["forwardToReplicas","clearExistingRules"]));return m&&(D.queryParameters.forwardToReplicas=1),S&&(D.queryParameters.clearExistingRules=1),_(e.transporter.write({method:A,path:h("1/indexes/%s/rules/batch",e.indexName),data:n},D),function(O,C){return ie(e)(O.taskID,C)})}},xr=function(e){return function(n,s){return Ze(e)([n],s)}},Ze=function(e){return function(n,s){var u=s||{},m=u.forwardToReplicas,S=u.clearExistingSynonyms,D=u.replaceExistingSynonyms,O=y(a(u,["forwardToReplicas","clearExistingSynonyms","replaceExistingSynonyms"]));return m&&(O.queryParameters.forwardToReplicas=1),(D||S)&&(O.queryParameters.replaceExistingSynonyms=1),_(e.transporter.write({method:A,path:h("1/indexes/%s/synonyms/batch",e.indexName),data:n},O),function(C,F){return ie(e)(C.taskID,F)})}},lt=function(e){return function(n,s){return e.transporter.read({method:A,path:h("1/indexes/%s/query",e.indexName),data:{query:n},cacheable:!0},s)}},ft=function(e){return function(n,s,u){return e.transporter.read({method:A,path:h("1/indexes/%s/facets/%s/query",e.indexName,n),data:{facetQuery:s},cacheable:!0},u)}},dt=function(e){return function(n,s){return e.transporter.read({method:A,path:h("1/indexes/%s/rules/search",e.indexName),data:{query:n}},s)}},pt=function(e){return function(n,s){return e.transporter.read({method:A,path:h("1/indexes/%s/synonyms/search",e.indexName),data:{query:n}},s)}},wr=function(e){return function(n,s){var u=s||{},m=u.forwardToReplicas,S=y(a(u,["forwardToReplicas"]));return m&&(S.queryParameters.forwardToReplicas=1),_(e.transporter.write({method:N,path:h("1/indexes/%s/settings",e.indexName),data:n},S),function(D,O){return ie(e)(D.taskID,O)})}},ie=function(e){return function(n,s){return v(function(u){return function(m){return function(S,D){return m.transporter.read({method:k,path:h("1/indexes/%s/task/%s",m.indexName,S.toString())},D)}}(e)(n,s).then(function(m){return m.status!=="published"?u():void 0})})}},je={AddObject:"addObject",UpdateObject:"updateObject",PartialUpdateObject:"partialUpdateObject",PartialUpdateObjectNoCreate:"partialUpdateObjectNoCreate",DeleteObject:"deleteObject",DeleteIndex:"delete",ClearIndex:"clear"},et={Settings:"settings",Synonyms:"synonyms",Rules:"rules"},Or=1,Tr=2,Pr=3;function ht(e,n,s){var u,m={appId:e,apiKey:n,timeouts:{connect:1,read:2,write:30},requester:{send:function(O){return new Promise(function(C){var F=new XMLHttpRequest;F.open(O.method,O.url,!0),Object.keys(O.headers).forEach(function(z){return F.setRequestHeader(z,O.headers[z])});var L,K=function(z,H){return setTimeout(function(){F.abort(),C({status:0,content:H,isTimedOut:!0})},1e3*z)},$=K(O.connectTimeout,"Connection timeout");F.onreadystatechange=function(){F.readyState>F.OPENED&&L===void 0&&(clearTimeout($),L=K(O.responseTimeout,"Socket timeout"))},F.onerror=function(){F.status===0&&(clearTimeout($),clearTimeout(L),C({content:F.responseText||"Network request failed",status:F.status,isTimedOut:!1}))},F.onload=function(){clearTimeout($),clearTimeout(L),C({content:F.responseText,status:F.status,isTimedOut:!1})},F.send(O.data)})}},logger:(u=Pr,{debug:function(O,C){return Or>=u&&console.debug(O,C),Promise.resolve()},info:function(O,C){return Tr>=u&&console.info(O,C),Promise.resolve()},error:function(O,C){return console.error(O,C),Promise.resolve()}}),responsesCache:p(),requestsCache:p({serializable:!1}),hostsCache:l({caches:[f({key:"".concat("4.19.1","-").concat(e)}),p()]}),userAgent:B("4.19.1").add({segment:"Browser"})},S=c(c({},m),s),D=function(){return function(O){return function(C){var F=C.region||"us",L=d(b.WithinHeaders,C.appId,C.apiKey),K=oe(c(c({hosts:[{url:"personalization.".concat(F,".algolia.com")}]},C),{},{headers:c(c(c({},L.headers()),{"content-type":"application/json"}),C.headers),queryParameters:c(c({},L.queryParameters()),C.queryParameters)}));return w({appId:C.appId,transporter:K},C.methods)}(c(c(c({},m),O),{},{methods:{getPersonalizationStrategy:G,setPersonalizationStrategy:J}}))}};return function(O){var C=O.appId,F=d(O.authMode!==void 0?O.authMode:b.WithinHeaders,C,O.apiKey),L=oe(c(c({hosts:[{url:"".concat(C,"-dsn.algolia.net"),accept:E.Read},{url:"".concat(C,".algolia.net"),accept:E.Write}].concat(g([{url:"".concat(C,"-1.algolianet.com")},{url:"".concat(C,"-2.algolianet.com")},{url:"".concat(C,"-3.algolianet.com")}]))},O),{},{headers:c(c(c({},F.headers()),{"content-type":"application/x-www-form-urlencoded"}),O.headers),queryParameters:c(c({},F.queryParameters()),O.queryParameters)}));return w({transporter:L,appId:C,addAlgoliaAgent:function(K,$){L.userAgent.add({segment:K,version:$})},clearCache:function(){return Promise.all([L.requestsCache.clear(),L.responsesCache.clear()]).then(function(){})}},O.methods)}(c(c({},S),{},{methods:{search:at,searchForFacetValues:ot,multipleBatch:Ut,multipleGetObjects:Bt,multipleQueries:at,copyIndex:be,copySettings:Pt,copySynonyms:jt,copyRules:Ye,moveIndex:qt,listIndices:Ft,getLogs:Et,listClusters:Nt,multipleSearchForFacetValues:ot,getApiKey:Ce,addApiKey:fe,listApiKeys:Lt,updateApiKey:Yt,deleteApiKey:At,restoreApiKey:Kt,assignUserID:Oe,assignUserIDs:Te,getUserID:Ct,searchUserIDs:zt,listUserIDs:Mt,getTopUserIDs:Rt,removeUserID:Gt,hasPendingMappings:Dt,clearDictionaryEntries:Re,deleteDictionaryEntries:St,getDictionarySettings:kt,getAppTask:nt,replaceDictionaryEntries:$t,saveDictionaryEntries:Vt,searchDictionaryEntries:Ht,setDictionarySettings:Jt,waitAppTask:Pe,customRequest:It,initIndex:function(O){return function(C){return De(O)(C,{methods:{batch:st,delete:nr,findAnswers:ur,getObject:lr,getObjects:dr,saveObject:gr,saveObjects:Qe,search:lt,searchForFacetValues:ft,waitTask:ie,setSettings:wr,getSettings:ut,partialUpdateObject:_r,partialUpdateObjects:ct,deleteObject:ar,deleteObjects:it,deleteBy:rr,clearObjects:Zt,browseObjects:Wt,getObjectPosition:fr,findObject:cr,exists:ir,saveSynonym:xr,saveSynonyms:Ze,getSynonym:hr,searchSynonyms:pt,browseSynonyms:Xt,deleteSynonym:sr,clearSynonyms:tr,replaceAllObjects:vr,replaceAllSynonyms:yr,searchRules:dt,getRule:pr,deleteRule:or,saveRule:br,saveRules:Xe,replaceAllRules:mr,browseRules:Qt,clearRules:er}})}},initAnalytics:function(){return function(O){return function(C){var F=C.region||"us",L=d(b.WithinHeaders,C.appId,C.apiKey),K=oe(c(c({hosts:[{url:"analytics.".concat(F,".algolia.com")}]},C),{},{headers:c(c(c({},L.headers()),{"content-type":"application/json"}),C.headers),queryParameters:c(c({},L.queryParameters()),C.queryParameters)}));return w({appId:C.appId,transporter:K},C.methods)}(c(c(c({},m),O),{},{methods:{addABTest:me,getABTest:_e,getABTests:ze,stopABTest:Je,deleteABTest:le}}))}},initPersonalization:D,initRecommendation:function(){return function(O){return S.logger.info("The `initRecommendation` method is deprecated. Use `initPersonalization` instead."),D()(O)}}}}))}return ht.version="4.19.1",ht})})(Ot);var vn=Ot.exports;const mn=bt(vn),Tt=Z=>(kr("data-v-b1753ff4"),Z=Z(),Er(),Z),yn={key:0,class:"controlPanel"},gn={class:"f6 mb1 gray"},bn={class:"mt0 f4 1b"},xn={key:0},wn={class:"bt bb b--moon-gray mv3 pv2"},On=["onSubmit"],Tn={class:"fw5 mb1"},Pn={class:"flex items-center mb2"},jn={class:"fieldForm__value flex-auto mr3"},In=["readonly"],An={class:"fieldForm__unit flex-none"},Sn=["readonly"],kn=["readonly"],En={class:"mt3"},Rn={key:0,class:"flex items-center justify-between"},Cn=["onClick"],Dn=["disabled"],Ln={key:1,class:"flex items-center justify-end"},Nn=["onClick"],Fn={class:"controlPanel__keywordSection mv3 pb2 bb"},Mn=Tt(()=>M("div",{class:"fw5 mb1"},"相關關鍵字",-1)),qn=Tt(()=>M("div",{class:"f6 gray"},"點選以下關鍵字，或是自行輸入，就能列出相關頁面",-1)),Un={class:"flex mt3"},Bn={class:"flex flex-wrap"},Gn=["onClick"],$n={class:"f6 gray mv1"},Kn=["onClick"],Vn={class:"flex-none dark-gray"},Hn=["innerHTML"],zn={class:"flex justify-between items-center"},Jn={key:1},Ke=15,Yn=Ee({__name:"ControlPanel",props:{userId:{type:String,required:!0},fields:{type:Array,required:!0},focusedPage:{type:Number,default:1},isSubmission:{type:Boolean,default:!0}},emits:["report","page","matched-pages","complete"],setup(Z,{emit:te}){const t=Z,{submitField:i,verifyField:c,sendTrackUsage:a}=wt(),r=ne(0),o=ye(()=>t.fields[r.value]),f={value:"",unit:"",notes:""},l=ne({...f}),p=ye(()=>r.value<t.fields.length-1?t.fields[r.value+1]:t.fields[0]),d=ye(()=>r.value>0?t.fields[r.value-1]:t.fields[t.fields.length-1]);function v(){r.value<t.fields.length-1?r.value+=1:r.value=0}function _(){r.value>0?r.value-=1:r.value=t.fields.length-1}const g=ne([]);Ae(g,G=>{G.length===t.fields.length&&te("complete")},{deep:!0});function w(){l.value={...f}}const h=ye(()=>!!l.value.value),b=ne(!1),y=["不正確","不確定","正確"];async function E(G){const J={userId:t.userId,submissionId:o.value.data.id,result:G},U=await c(J);g.value.push({field:o.value,atRow:U}),v()}function x(){g.value.push({field:o.value}),w(),v()}async function T(){if(!h.value)return;b.value=!0;const{value:G,unit:J,notes:U}=l.value,{year:fe,company:Oe,category:Te,label:Re}=o.value,be={userId:t.userId,year:`${fe}`,companyId:Oe.id,category:Te,field:Re,value:G,unit:J,notes:U,page:t.focusedPage};Y.value&&(be.keyword=Y.value);const Ye=await i(be);g.value.push({field:o.value,data:be,atRow:Ye}),_e.value.answerPage=`${t.focusedPage}`,w(),v(),b.value=!1}function j(G){return G+(o.value.company.pageOffset||0)}const I=mt(),R=mn(I.public.algoliaAppId,I.public.algoliaSearchApiKey).initIndex(I.public.algoliaIndexName),k=ne(""),A=ne(""),N=ne([]),V=ne(0),Y=ye(()=>A.value||k.value||"");Ae([k,A],([G,J],[U,fe])=>{G!==U&&G?A.value="":J!==fe&&J&&(k.value="")});function oe(G){k.value=G}Ae(Y,()=>{B()});async function B(){if(!Y.value){N.value=[],W.value=null;return}const{hits:G}=await R.search(Y.value,{facetFilters:[`company:${o.value.company.id}`,`year:${o.value.year}`],hitsPerPage:100});if(N.value=G,W.value=null,V.value){const J=G.find(U=>U.page===V.value);J?X(J):te("page",{highlight:Y.value,page:V.value}),V.value=0}}Ae(N,G=>{const J=G.map(U=>U.page);te("matched-pages",J)});function ee(G){G=G.replace(/\n/g,"");const J=`${Y.value||""}`,U=G.indexOf(J),fe=J.length+Ke;if(U<0)return G.slice(0,fe*2);const Oe=J.length;let Te=G.slice(0,U);const Re=`${G.slice(U+Oe,U+Oe+Ke)}...`;if(U>Ke)Te=`...${G.slice(U-Ke,U)}`;else return G.slice(0,fe*2)+"...";return`${ve.escape(Te)}<b class="underline">${J}</b>${ve.escape(Re)}`}const W=ne(null);async function X(G){W.value===G?te("page",{highlight:"",page:1}):W.value=G,await Sr(),_e.value.clickPages.push(G.page),te("page",{highlight:Y.value,page:G.page})}function he(){N.value=[],k.value="",A.value=""}function me(){const G=o.value.data;l.value={value:G.get("數值"),unit:G.get("單位"),notes:G.get("補充資訊")};const J=G.get("答案頁次"),U=G.get("答案關鍵字");U?o.value.keywords.includes(U)?k.value=U:A.value=U:he(),J&&(U?V.value=J:te("page",{highlight:"",page:J}))}Ir(()=>{o.value&&(te("report",{year:o.value.year,company:o.value.company}),t.isSubmission?he():me())});function le(){return{searchKeyword:Y.value,isPredefined:!0,clickPages:[],viewPages:[],answerPage:""}}const _e=ne(le());function ze(){_e.value=le()}const Je=ve.throttle(()=>{const{year:G,company:J,label:U}=o.value,fe={userId:t.userId,year:`${G}`,companyId:J.id,field:U,isOnVerify:!t.isSubmission,..._e.value};return a(fe)},100);return Ae(()=>t.focusedPage,G=>{!G||G===1||_e.value.viewPages.push(G)}),Ae(Y,async G=>{Je(),await ze(),_e.value.isPredefined=G!==A.value,_e.value.searchKeyword=G}),(G,J)=>q(o)?(Q(),ae("div",yn,[M("div",gn,ue(Z.isSubmission?"標注欄位":"驗證欄位")+" "+ue(q(g).length)+" / "+ue(t.fields.length),1),M("h2",bn,ue(q(o).year)+" 年 | "+ue(q(o).company.name)+" | "+ue(q(o).label),1),q(o).notes?(Q(),ae("p",xn,ue(q(o).notes),1)):Ue("",!0),M("div",wn,[M("form",{class:"fieldForm mt3 mb4 pb2 bb b--moon-gray",onSubmit:Ve(T,["prevent"])},[M("div",Tn,ue(Z.isSubmission?"填寫判讀結果":"驗證欄位數值"),1),M("div",Pn,[M("label",jn,[ge("數值"),Se(M("input",{class:"fieldForm__input","onUpdate:modelValue":J[0]||(J[0]=U=>q(l).value=U),type:"text",placeholder:"數值",readonly:!Z.isSubmission},null,8,In),[[Fe,q(l).value,void 0,{trim:!0}]])]),M("label",An,[ge("單位"),Se(M("input",{class:"fieldForm__input","onUpdate:modelValue":J[1]||(J[1]=U=>q(l).unit=U),type:"text",placeholder:"單位",readonly:!Z.isSubmission},null,8,Sn),[[Fe,q(l).unit,void 0,{trim:!0}]])])]),M("label",null,[ge("備註"),Se(M("textarea",{class:"fieldForm__input","onUpdate:modelValue":J[2]||(J[2]=U=>q(l).notes=U),placeholder:"備註",readonly:!Z.isSubmission},null,8,kn),[[Fe,q(l).notes,void 0,{trim:!0}]])]),M("div",En,[Z.isSubmission?(Q(),ae("div",Rn,[M("button",{class:"pa2 bg-white ba b--light-gray gray pointer",onClick:Ve(x,["stop","prevent"])},"找不到答案，放棄 🥺",8,Cn),M("button",{class:"pv2 ph4 pointer",type:"submit",disabled:!q(h)||q(b)},"送出標注結果",8,Dn)])):(Q(),ae("div",Ln,[(Q(),ae(Me,null,qe(y,U=>M("button",{class:"pv1 ph3 pointer ml2",key:U,onClick:Ve(fe=>E(U),["stop","prevent"])},"標為"+ue(U),9,Nn)),64))]))])],40,On),M("div",Fn,[Mn,qn,M("div",Un,[M("div",Bn,[(Q(!0),ae(Me,null,qe(q(o).keywords,U=>(Q(),ae("button",{class:_t(["controlPanel__keyword pointer",{"controlPanel__keyword--active":U===q(Y)}]),key:U,onClick:fe=>oe(U)},ue(U),11,Gn))),128)),Se(M("input",{class:"mt1 f6 w-100 controlPanel__input","onUpdate:modelValue":J[3]||(J[3]=U=>yt(A)?A.value=U:null),placeholder:"自訂關鍵字"},null,512),[[Fe,q(A),void 0,{trim:!0}]])])]),Se(M("div",$n,[(Q(!0),ae(Me,null,qe(q(N),U=>(Q(),ae("div",{class:_t(["flex mv2 dim pointer",{b:U===q(W)}]),key:U.page,onClick:fe=>X(U)},[M("div",Vn,"頁"+ue(j(U.page)),1),M("div",{class:"pl2",innerHTML:ee(U.content)},null,8,Hn)],10,Kn))),128))],512),[[Ar,q(N).length]])]),M("div",zn,[q(d)!==q(p)?(Q(),ae("button",{key:0,class:"controlPanel__cursor",onClick:_},"跳到 《 "+ue(q(d).label),1)):(Q(),ae("div",Jn)),M("button",{class:"controlPanel__cursor",onClick:v},"跳到 "+ue(q(p).label)+" 》",1)])])])):Ue("",!0)}});const Wn=He(Yn,[["__scopeId","data-v-b1753ff4"]]),Qn={class:"crowdEditor"},Xn={class:"br b--moon-gray"},Zn={class:"crowdEditor__control pv3 ph2"},ea={class:"main__reader"},ta=Ee({__name:"FieldEditor",props:{userId:{type:String,required:!0},fields:{type:Array,required:!0},isSubmission:{type:Boolean,default:!0}},emits:["complete"],setup(Z,{emit:te}){const t=ne(null),i=ne(null),c=ne([]),a=ne(0);function r(d){a.value=d}function o(){te("complete")}function f(d){t.value=d,i.value={page:1,highlight:""}}function l(d){i.value=d}function p(d){c.value=d}return(d,v)=>{const _=Wn,g=Dr;return Q(),ae("div",Qn,[M("div",Xn,[M("div",Zn,[gt(_,{"user-id":Z.userId,fields:Z.fields,"focused-page":q(a),"is-submission":Z.isSubmission,onReport:f,onPage:l,onMatchedPages:p,onComplete:o},null,8,["user-id","fields","focused-page","is-submission"])])]),M("div",ea,[q(t)&&q(i)?(Q(),ke(g,{key:0,year:q(t).year,company:q(t).company,page:q(i).page,highlight:q(i).highlight,"matched-pages":q(c),onViewPage:r},null,8,["year","company","page","highlight","matched-pages"])):Ue("",!0)])])}}});const ra=He(ta,[["__scopeId","data-v-06fa7a64"]]),na={class:"gotoVerify center mw7 pa4 mt5 br2 ba b--moon-gray lh-copy"},aa=M("h1",{class:"mt0 f4 f3-ns"},"完成一半了！",-1),oa=M("p",null,"所有的標記任務都已完成，接下來，就輪到幫忙驗證其他人標注的資料囉～",-1),sa=Ee({__name:"GotoVerify",emits:["continue"],setup(Z,{emit:te}){function t(){te("continue")}return(i,c)=>(Q(),ae("div",na,[aa,oa,M("div",{class:"flex items-center mt4"},[M("button",{class:"thankYou__button br2 pv2 ph3 pointer ba b--dark-green bg-dark-green white mr3",onClick:t},"我準備好了，開始驗證資料")])]))}}),ia={class:"thankYou center mw7 pa4 mt5 br2 ba b--moon-gray lh-copy"},ua=Cr('<h1 class="mt0 f4 f3-ns" data-v-276f04be>感謝參與標記原型工具測試！</h1><p data-v-276f04be>所有任務都已經完成。在離開前，請填寫一份問卷，讓我們了解你的使用心得。</p><p data-v-276f04be>如果想要多參與一些測試，也歡迎點下「再來一輪」，我們會重新抽籤。記得使用同樣的暱稱，才能累計積分呦 🤓</p><p data-v-276f04be>如果對這個專案有更多想法，除了找我們聊聊之外，也歡迎：</p><ul data-v-276f04be><li data-v-276f04be>讀讀<a href="https://g0v.hackmd.io/@ddio-io/open-csr-report" target="_blank" rel="noopener" data-v-276f04be>專案共筆</a></li><li data-v-276f04be>翻翻<a href="https://github.com/gcaa-org-tw/company-report-toolkit/" target="_blank" rel="noopener" data-v-276f04be>Github 上的程式碼</a></li><li data-v-276f04be>查看<a href="https://airtable.com/appsREnwMpxAZmaRv/shrhubstEzdWYZWfh" target="_blank" rel="noopener" data-v-276f04be>標注狀況與問卷結果</a></li></ul>',5),ca={class:"flex items-center mv4"},la=Ee({__name:"SayThanks",props:{userId:{type:String,required:!0}},emits:["start-over"],setup(Z,{emit:te}){const t=Z,i=ye(()=>"https://airtable.com/appsREnwMpxAZmaRv/shrjkPKD0t0J5hxP2?prefill_%E4%BD%BF%E7%94%A8%E8%80%85%E6%9A%B1%E7%A8%B1="+encodeURIComponent(t.userId));function c(){te("start-over")}return(a,r)=>{const o=Lr;return Q(),ae("div",ia,[ua,M("div",ca,[M("button",{class:"thankYou__button pointer bg-green white mr3",onClick:c},"再來一輪"),gt(o,{class:"thankYou__button bg-dark-green white no-underline",to:q(i),target:"_blank",rel:"noopener"},{default:Rr(()=>[ge("填寫問卷")]),_:1},8,["to"])])])}}});const fa=He(la,[["__scopeId","data-v-276f04be"]]),da={class:"crowdLanding"},pa=Ee({__name:"index",setup(Z){const te=ne(""),t=ne([]),i=ne(!1),c=ne(!1),a=ne([]),r=ne(!1);function o({submissions:p,verifications:d}){t.value=p,a.value=d,p.length||(i.value=!0,c.value=!0),d.length||(c.value=!0,r.value=!0)}const f=ye(()=>te.value&&(t.value.length||i.value));function l(){te.value="",t.value=[],i.value=!1,a.value=[],r.value=!1,c.value=!1}return(p,d)=>{const v=_n,_=ra,g=sa,w=fa;return Q(),ae("div",da,[q(f)?q(i)?q(c)?q(r)?(Q(),ke(w,{key:4,"user-id":q(te),onStartOver:l},null,8,["user-id"])):(Q(),ke(_,{key:3,"user-id":q(te),fields:q(a),"is-submission":!1,onComplete:d[3]||(d[3]=h=>r.value=!0)},null,8,["user-id","fields"])):(Q(),ke(g,{key:2,onContinue:d[2]||(d[2]=h=>c.value=!0)})):(Q(),ke(_,{key:1,"user-id":q(te),fields:q(t),onComplete:d[1]||(d[1]=h=>i.value=!0)},null,8,["user-id","fields"])):(Q(),ke(v,{key:0,onUserId:d[0]||(d[0]=h=>te.value=h),onTasks:o}))])}}});const ga=He(pa,[["__scopeId","data-v-156e1ccb"]]);export{ga as default};
