import{d as be,r as N,c as G,o as we,B as re,k as F,l as W,m as R,F as fe,C as ye,t as ne,D as Ne,A as E,E as rt,G as Tn,H as qn,I as Nn,J as An,_ as st,K as ut,L as Me,M as Rn,N as Cn,O as Mn,P as Ln,Q as Vn,R as ct,j as Un,S as Ae,b as Fn,T as at,q as lt,U as ot,V as dt,W as Le}from"./entry.bb14ee49.js";var $n=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zn(y){return y&&y.__esModule&&Object.prototype.hasOwnProperty.call(y,"default")?y.default:y}var ft={exports:{}};/*! algoliasearch.umd.js | 4.19.1 | © Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */(function(y,v){(function(g,I){y.exports=I()})($n,function(){function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I(Object(n),!0).forEach(function(r){g(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function h(e,t){if(e==null)return{};var n,r,a=function(l,i){if(l==null)return{};var u,p,d={},P=Object.keys(l);for(p=0;p<P.length;p++)u=P[p],i.indexOf(u)>=0||(d[u]=l[u]);return d}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function b(e,t){return function(n){if(Array.isArray(n))return n}(e)||function(n,r){if(Symbol.iterator in Object(n)||Object.prototype.toString.call(n)==="[object Arguments]"){var a=[],s=!0,l=!1,i=void 0;try{for(var u,p=n[Symbol.iterator]();!(s=(u=p.next()).done)&&(a.push(u.value),!r||a.length!==r);s=!0);}catch(d){l=!0,i=d}finally{try{s||p.return==null||p.return()}finally{if(l)throw i}}return a}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function O(e){return function(t){if(Array.isArray(t)){for(var n=0,r=new Array(t.length);n<t.length;n++)r[n]=t[n];return r}}(e)||function(t){if(Symbol.iterator in Object(t)||Object.prototype.toString.call(t)==="[object Arguments]")return Array.from(t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function j(e){var t,n="algoliasearch-client-js-".concat(e.key),r=function(){return t===void 0&&(t=e.localStorage||window.localStorage),t},a=function(){return JSON.parse(r().getItem(n)||"{}")},s=function(i){r().setItem(n,JSON.stringify(i))},l=function(){var i=e.timeToLive?1e3*e.timeToLive:null,u=a(),p=Object.fromEntries(Object.entries(u).filter(function(P){return b(P,2)[1].timestamp!==void 0}));if(s(p),i){var d=Object.fromEntries(Object.entries(p).filter(function(P){var w=b(P,2)[1],S=new Date().getTime();return!(w.timestamp+i<S)}));s(d)}};return{get:function(i,u){var p=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then(function(){l();var d=JSON.stringify(i);return a()[d]}).then(function(d){return Promise.all([d?d.value:u(),d!==void 0])}).then(function(d){var P=b(d,2),w=P[0],S=P[1];return Promise.all([w,S||p.miss(w)])}).then(function(d){return b(d,1)[0]})},set:function(i,u){return Promise.resolve().then(function(){var p=a();return p[JSON.stringify(i)]={timestamp:new Date().getTime(),value:u},r().setItem(n,JSON.stringify(p)),u})},delete:function(i){return Promise.resolve().then(function(){var u=a();delete u[JSON.stringify(i)],r().setItem(n,JSON.stringify(u))})},clear:function(){return Promise.resolve().then(function(){r().removeItem(n)})}}}function $(e){var t=O(e.caches),n=t.shift();return n===void 0?{get:function(r,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},l=a();return l.then(function(i){return Promise.all([i,s.miss(i)])}).then(function(i){return b(i,1)[0]})},set:function(r,a){return Promise.resolve(a)},delete:function(r){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(r,a){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}};return n.get(r,a,s).catch(function(){return $({caches:t}).get(r,a,s)})},set:function(r,a){return n.set(r,a).catch(function(){return $({caches:t}).set(r,a)})},delete:function(r){return n.delete(r).catch(function(){return $({caches:t}).delete(r)})},clear:function(){return n.clear().catch(function(){return $({caches:t}).clear()})}}}function T(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{serializable:!0},t={};return{get:function(n,r){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{miss:function(){return Promise.resolve()}},s=JSON.stringify(n);if(s in t)return Promise.resolve(e.serializable?JSON.parse(t[s]):t[s]);var l=r(),i=a&&a.miss||function(){return Promise.resolve()};return l.then(function(u){return i(u)}).then(function(){return l})},set:function(n,r){return t[JSON.stringify(n)]=e.serializable?JSON.stringify(r):r,Promise.resolve(r)},delete:function(n){return delete t[JSON.stringify(n)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function L(e,t,n){var r={"x-algolia-api-key":n,"x-algolia-application-id":t};return{headers:function(){return e===z.WithinHeaders?r:{}},queryParameters:function(){return e===z.WithinQueryParameters?r:{}}}}function U(e){var t=0;return e(function n(){return t++,new Promise(function(r){setTimeout(function(){r(e(n))},Math.min(100*t,1e3))})})}function _(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(n,r){return Promise.resolve()};return Object.assign(e,{wait:function(n){return _(e.then(function(r){return Promise.all([t(r,n),r])}).then(function(r){return r[1]}))}})}function C(e){for(var t=e.length-1;t>0;t--){var n=Math.floor(Math.random()*(t+1)),r=e[t];e[t]=e[n],e[n]=r}return e}function ee(e,t){return t&&Object.keys(t).forEach(function(n){e[n]=t[n](e)}),e}function m(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var a=0;return e.replace(/%s/g,function(){return encodeURIComponent(n[a++])})}var z={WithinQueryParameters:0,WithinHeaders:1};function A(e,t){var n=e||{},r=n.data||{};return Object.keys(n).forEach(function(a){["timeout","headers","queryParameters","data","cacheable"].indexOf(a)===-1&&(r[a]=n[a])}),{data:Object.entries(r).length>0?r:void 0,timeout:n.timeout||t,headers:n.headers||{},queryParameters:n.queryParameters||{},cacheable:n.cacheable}}var H={Read:1,Write:2,Any:3},Q=1,ue=2,ie=3;function ae(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Q;return o(o({},e),{},{status:t,lastUpdate:Date.now()})}function Y(e){return typeof e=="string"?{protocol:"https",url:e,accept:H.Any}:{protocol:e.protocol||"https",url:e.url,accept:e.accept||H.Any}}var Z="DELETE",c="GET",f="POST",k="PUT";function V(e,t){return Promise.all(t.map(function(n){return e.get(n,function(){return Promise.resolve(ae(n))})})).then(function(n){var r=n.filter(function(l){return function(i){return i.status===Q||Date.now()-i.lastUpdate>12e4}(l)}),a=n.filter(function(l){return function(i){return i.status===ie&&Date.now()-i.lastUpdate<=12e4}(l)}),s=[].concat(O(r),O(a));return{getTimeout:function(l,i){return(a.length===0&&l===0?1:a.length+3+l)*i},statelessHosts:s.length>0?s.map(function(l){return Y(l)}):t}})}function X(e,t,n,r){var a=[],s=function(w,S){if(!(w.method===c||w.data===void 0&&S.data===void 0)){var x=Array.isArray(w.data)?w.data:o(o({},w.data),S.data);return JSON.stringify(x)}}(n,r),l=function(w,S){var x=o(o({},w.headers),S.headers),D={};return Object.keys(x).forEach(function(q){var K=x[q];D[q.toLowerCase()]=K}),D}(e,r),i=n.method,u=n.method!==c?{}:o(o({},n.data),r.data),p=o(o(o({"x-algolia-agent":e.userAgent.value},e.queryParameters),u),r.queryParameters),d=0,P=function w(S,x){var D=S.pop();if(D===void 0)throw{name:"RetryError",message:"Unreachable hosts - your application id may be incorrect. If the error persists, contact support@algolia.com.",transporterStackTrace:ze(a)};var q={data:s,headers:l,method:i,url:mt(D,n.path,p),connectTimeout:x(d,e.timeouts.connect),responseTimeout:x(d,r.timeout)},K=function(J){var B={request:q,response:J,host:D,triesLeft:S.length};return a.push(B),B},me={onSuccess:function(J){return function(B){try{return JSON.parse(B.content)}catch(se){throw function(oe,de){return{name:"DeserializationError",message:oe,response:de}}(se.message,B)}}(J)},onRetry:function(J){var B=K(J);return J.isTimedOut&&d++,Promise.all([e.logger.info("Retryable failure",Be(B)),e.hostsCache.set(D,ae(D,J.isTimedOut?ie:ue))]).then(function(){return w(S,x)})},onFail:function(J){throw K(J),function(B,se){var oe=B.content,de=B.status,ge=oe;try{ge=JSON.parse(oe).message}catch{}return function(xe,qe,En){return{name:"ApiError",message:xe,status:qe,transporterStackTrace:En}}(ge,de,se)}(J,ze(a))}};return e.requester.send(q).then(function(J){return function(B,se){return function(oe){var de=oe.status;return oe.isTimedOut||function(ge){var xe=ge.isTimedOut,qe=ge.status;return!xe&&~~qe==0}(oe)||~~(de/100)!=2&&~~(de/100)!=4}(B)?se.onRetry(B):~~(B.status/100)==2?se.onSuccess(B):se.onFail(B)}(J,me)})};return V(e.hostsCache,t).then(function(w){return P(O(w.statelessHosts).reverse(),w.getTimeout)})}function te(e){var t=e.hostsCache,n=e.logger,r=e.requester,a=e.requestsCache,s=e.responsesCache,l=e.timeouts,i=e.userAgent,u=e.hosts,p=e.queryParameters,d={hostsCache:t,logger:n,requester:r,requestsCache:a,responsesCache:s,timeouts:l,userAgent:i,headers:e.headers,queryParameters:p,hosts:u.map(function(P){return Y(P)}),read:function(P,w){var S=A(w,d.timeouts.read),x=function(){return X(d,d.hosts.filter(function(q){return(q.accept&H.Read)!=0}),P,S)};if((S.cacheable!==void 0?S.cacheable:P.cacheable)!==!0)return x();var D={request:P,mappedRequestOptions:S,transporter:{queryParameters:d.queryParameters,headers:d.headers}};return d.responsesCache.get(D,function(){return d.requestsCache.get(D,function(){return d.requestsCache.set(D,x()).then(function(q){return Promise.all([d.requestsCache.delete(D),q])},function(q){return Promise.all([d.requestsCache.delete(D),Promise.reject(q)])}).then(function(q){var K=b(q,2);return K[0],K[1]})})},{miss:function(q){return d.responsesCache.set(D,q)}})},write:function(P,w){return X(d,d.hosts.filter(function(S){return(S.accept&H.Write)!=0}),P,A(w,d.timeouts.write))}};return d}function Fe(e){var t={value:"Algolia for JavaScript (".concat(e,")"),add:function(n){var r="; ".concat(n.segment).concat(n.version!==void 0?" (".concat(n.version,")"):"");return t.value.indexOf(r)===-1&&(t.value="".concat(t.value).concat(r)),t}};return t}function mt(e,t,n){var r=$e(n),a="".concat(e.protocol,"://").concat(e.url,"/").concat(t.charAt(0)==="/"?t.substr(1):t);return r.length&&(a+="?".concat(r)),a}function $e(e){return Object.keys(e).map(function(t){return m("%s=%s",t,(n=e[t],Object.prototype.toString.call(n)==="[object Object]"||Object.prototype.toString.call(n)==="[object Array]"?JSON.stringify(e[t]):e[t]));var n}).join("&")}function ze(e){return e.map(function(t){return Be(t)})}function Be(e){var t=e.request.headers["x-algolia-api-key"]?{"x-algolia-api-key":"*****"}:{};return o(o({},e),{},{request:o(o({},e.request),{},{headers:o(o({},e.request.headers),t)})})}var gt=function(e){return function(t,n){return e.transporter.write({method:f,path:"2/abtests",data:t},n)}},yt=function(e){return function(t,n){return e.transporter.write({method:Z,path:m("2/abtests/%s",t)},n)}},vt=function(e){return function(t,n){return e.transporter.read({method:c,path:m("2/abtests/%s",t)},n)}},bt=function(e){return function(t){return e.transporter.read({method:c,path:"2/abtests"},t)}},wt=function(e){return function(t,n){return e.transporter.write({method:f,path:m("2/abtests/%s/stop",t)},n)}},_t=function(e){return function(t){return e.transporter.read({method:c,path:"1/strategies/personalization"},t)}},Pt=function(e){return function(t,n){return e.transporter.write({method:f,path:"1/strategies/personalization",data:t},n)}};function Oe(e){return function t(n){return e.request(n).then(function(r){if(e.batch!==void 0&&e.batch(r.hits),!e.shouldStop(r))return r.cursor?t({cursor:r.cursor}):t({page:(n.page||0)+1})})}({})}var xt=function(e){return function(t,n){var r=n||{},a=r.queryParameters,s=h(r,["queryParameters"]),l=o({acl:t},a!==void 0?{queryParameters:a}:{});return _(e.transporter.write({method:f,path:"1/keys",data:l},s),function(i,u){return U(function(p){return pe(e)(i.key,u).catch(function(d){if(d.status!==404)throw d;return p()})})})}},kt=function(e){return function(t,n,r){var a=A(r);return a.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:f,path:"1/clusters/mapping",data:{cluster:n}},a)}},It=function(e){return function(t,n,r){return e.transporter.write({method:f,path:"1/clusters/mapping/batch",data:{users:t,cluster:n}},r)}},Ot=function(e){return function(t,n){return _(e.transporter.write({method:f,path:m("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!0,requests:{action:"addEntry",body:[]}}},n),function(r,a){return ce(e)(r.taskID,a)})}},Pe=function(e){return function(t,n,r){return _(e.transporter.write({method:f,path:m("1/indexes/%s/operation",t),data:{operation:"copy",destination:n}},r),function(a,s){return he(e)(t,{methods:{waitTask:M}}).waitTask(a.taskID,s)})}},St=function(e){return function(t,n,r){return Pe(e)(t,n,o(o({},r),{},{scope:[Te.Rules]}))}},jt=function(e){return function(t,n,r){return Pe(e)(t,n,o(o({},r),{},{scope:[Te.Settings]}))}},Dt=function(e){return function(t,n,r){return Pe(e)(t,n,o(o({},r),{},{scope:[Te.Synonyms]}))}},Et=function(e){return function(t,n){return t.method===c?e.transporter.read(t,n):e.transporter.write(t,n)}},Tt=function(e){return function(t,n){return _(e.transporter.write({method:Z,path:m("1/keys/%s",t)},n),function(r,a){return U(function(s){return pe(e)(t,a).then(s).catch(function(l){if(l.status!==404)throw l})})})}},qt=function(e){return function(t,n,r){var a=n.map(function(s){return{action:"deleteEntry",body:{objectID:s}}});return _(e.transporter.write({method:f,path:m("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!1,requests:a}},r),function(s,l){return ce(e)(s.taskID,l)})}},pe=function(e){return function(t,n){return e.transporter.read({method:c,path:m("1/keys/%s",t)},n)}},We=function(e){return function(t,n){return e.transporter.read({method:c,path:m("1/task/%s",t.toString())},n)}},Nt=function(e){return function(t){return e.transporter.read({method:c,path:"/1/dictionaries/*/settings"},t)}},At=function(e){return function(t){return e.transporter.read({method:c,path:"1/logs"},t)}},Rt=function(e){return function(t){return e.transporter.read({method:c,path:"1/clusters/mapping/top"},t)}},Ct=function(e){return function(t,n){return e.transporter.read({method:c,path:m("1/clusters/mapping/%s",t)},n)}},Mt=function(e){return function(t){var n=t||{},r=n.retrieveMappings,a=h(n,["retrieveMappings"]);return r===!0&&(a.getClusters=!0),e.transporter.read({method:c,path:"1/clusters/mapping/pending"},a)}},he=function(e){return function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r={transporter:e.transporter,appId:e.appId,indexName:t};return ee(r,n.methods)}},Lt=function(e){return function(t){return e.transporter.read({method:c,path:"1/keys"},t)}},Vt=function(e){return function(t){return e.transporter.read({method:c,path:"1/clusters"},t)}},Ut=function(e){return function(t){return e.transporter.read({method:c,path:"1/indexes"},t)}},Ft=function(e){return function(t){return e.transporter.read({method:c,path:"1/clusters/mapping"},t)}},$t=function(e){return function(t,n,r){return _(e.transporter.write({method:f,path:m("1/indexes/%s/operation",t),data:{operation:"move",destination:n}},r),function(a,s){return he(e)(t,{methods:{waitTask:M}}).waitTask(a.taskID,s)})}},zt=function(e){return function(t,n){return _(e.transporter.write({method:f,path:"1/indexes/*/batch",data:{requests:t}},n),function(r,a){return Promise.all(Object.keys(r.taskID).map(function(s){return he(e)(s,{methods:{waitTask:M}}).waitTask(r.taskID[s],a)}))})}},Bt=function(e){return function(t,n){return e.transporter.read({method:f,path:"1/indexes/*/objects",data:{requests:t}},n)}},He=function(e){return function(t,n){var r=t.map(function(a){return o(o({},a),{},{params:$e(a.params||{})})});return e.transporter.read({method:f,path:"1/indexes/*/queries",data:{requests:r},cacheable:!0},n)}},Ke=function(e){return function(t,n){return Promise.all(t.map(function(r){var a=r.params,s=a.facetName,l=a.facetQuery,i=h(a,["facetName","facetQuery"]);return he(e)(r.indexName,{methods:{searchForFacetValues:Ze}}).searchForFacetValues(s,l,o(o({},n),i))}))}},Wt=function(e){return function(t,n){var r=A(n);return r.queryParameters["X-Algolia-User-ID"]=t,e.transporter.write({method:Z,path:"1/clusters/mapping"},r)}},Ht=function(e){return function(t,n,r){var a=n.map(function(s){return{action:"addEntry",body:s}});return _(e.transporter.write({method:f,path:m("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!0,requests:a}},r),function(s,l){return ce(e)(s.taskID,l)})}},Kt=function(e){return function(t,n){return _(e.transporter.write({method:f,path:m("1/keys/%s/restore",t)},n),function(r,a){return U(function(s){return pe(e)(t,a).catch(function(l){if(l.status!==404)throw l;return s()})})})}},Jt=function(e){return function(t,n,r){var a=n.map(function(s){return{action:"addEntry",body:s}});return _(e.transporter.write({method:f,path:m("/1/dictionaries/%s/batch",t),data:{clearExistingDictionaryEntries:!1,requests:a}},r),function(s,l){return ce(e)(s.taskID,l)})}},Gt=function(e){return function(t,n,r){return e.transporter.read({method:f,path:m("/1/dictionaries/%s/search",t),data:{query:n},cacheable:!0},r)}},Qt=function(e){return function(t,n){return e.transporter.read({method:f,path:"1/clusters/mapping/search",data:{query:t}},n)}},Xt=function(e){return function(t,n){return _(e.transporter.write({method:k,path:"/1/dictionaries/*/settings",data:t},n),function(r,a){return ce(e)(r.taskID,a)})}},Yt=function(e){return function(t,n){var r=Object.assign({},n),a=n||{},s=a.queryParameters,l=h(a,["queryParameters"]),i=s?{queryParameters:s}:{},u=["acl","indexes","referers","restrictSources","queryParameters","description","maxQueriesPerIPPerHour","maxHitsPerQuery"];return _(e.transporter.write({method:k,path:m("1/keys/%s",t),data:i},l),function(p,d){return U(function(P){return pe(e)(t,d).then(function(w){return function(S){return Object.keys(r).filter(function(x){return u.indexOf(x)!==-1}).every(function(x){if(Array.isArray(S[x])&&Array.isArray(r[x])){var D=S[x];return D.length===r[x].length&&D.every(function(q,K){return q===r[x][K]})}return S[x]===r[x]})}(w)?Promise.resolve():P()})})})}},ce=function(e){return function(t,n){return U(function(r){return We(e)(t,n).then(function(a){return a.status!=="published"?r():void 0})})}},Je=function(e){return function(t,n){return _(e.transporter.write({method:f,path:m("1/indexes/%s/batch",e.indexName),data:{requests:t}},n),function(r,a){return M(e)(r.taskID,a)})}},Zt=function(e){return function(t){return Oe(o(o({shouldStop:function(n){return n.cursor===void 0}},t),{},{request:function(n){return e.transporter.read({method:f,path:m("1/indexes/%s/browse",e.indexName),data:n},t)}}))}},en=function(e){return function(t){var n=o({hitsPerPage:1e3},t);return Oe(o(o({shouldStop:function(r){return r.hits.length<n.hitsPerPage}},n),{},{request:function(r){return et(e)("",o(o({},n),r)).then(function(a){return o(o({},a),{},{hits:a.hits.map(function(s){return delete s._highlightResult,s})})})}}))}},tn=function(e){return function(t){var n=o({hitsPerPage:1e3},t);return Oe(o(o({shouldStop:function(r){return r.hits.length<n.hitsPerPage}},n),{},{request:function(r){return tt(e)("",o(o({},n),r)).then(function(a){return o(o({},a),{},{hits:a.hits.map(function(s){return delete s._highlightResult,s})})})}}))}},Se=function(e){return function(t,n,r){var a=r||{},s=a.batchSize,l=h(a,["batchSize"]),i={taskIDs:[],objectIDs:[]};return _(function u(){var p,d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,P=[];for(p=d;p<t.length&&(P.push(t[p]),P.length!==(s||1e3));p++);return P.length===0?Promise.resolve(i):Je(e)(P.map(function(w){return{action:n,body:w}}),l).then(function(w){return i.objectIDs=i.objectIDs.concat(w.objectIDs),i.taskIDs.push(w.taskID),p++,u(p)})}(),function(u,p){return Promise.all(u.taskIDs.map(function(d){return M(e)(d,p)}))})}},nn=function(e){return function(t){return _(e.transporter.write({method:f,path:m("1/indexes/%s/clear",e.indexName)},t),function(n,r){return M(e)(n.taskID,r)})}},rn=function(e){return function(t){var n=t||{},r=n.forwardToReplicas,a=A(h(n,["forwardToReplicas"]));return r&&(a.queryParameters.forwardToReplicas=1),_(e.transporter.write({method:f,path:m("1/indexes/%s/rules/clear",e.indexName)},a),function(s,l){return M(e)(s.taskID,l)})}},an=function(e){return function(t){var n=t||{},r=n.forwardToReplicas,a=A(h(n,["forwardToReplicas"]));return r&&(a.queryParameters.forwardToReplicas=1),_(e.transporter.write({method:f,path:m("1/indexes/%s/synonyms/clear",e.indexName)},a),function(s,l){return M(e)(s.taskID,l)})}},on=function(e){return function(t,n){return _(e.transporter.write({method:f,path:m("1/indexes/%s/deleteByQuery",e.indexName),data:t},n),function(r,a){return M(e)(r.taskID,a)})}},sn=function(e){return function(t){return _(e.transporter.write({method:Z,path:m("1/indexes/%s",e.indexName)},t),function(n,r){return M(e)(n.taskID,r)})}},un=function(e){return function(t,n){return _(Ge(e)([t],n).then(function(r){return{taskID:r.taskIDs[0]}}),function(r,a){return M(e)(r.taskID,a)})}},Ge=function(e){return function(t,n){var r=t.map(function(a){return{objectID:a}});return Se(e)(r,le.DeleteObject,n)}},cn=function(e){return function(t,n){var r=n||{},a=r.forwardToReplicas,s=A(h(r,["forwardToReplicas"]));return a&&(s.queryParameters.forwardToReplicas=1),_(e.transporter.write({method:Z,path:m("1/indexes/%s/rules/%s",e.indexName,t)},s),function(l,i){return M(e)(l.taskID,i)})}},ln=function(e){return function(t,n){var r=n||{},a=r.forwardToReplicas,s=A(h(r,["forwardToReplicas"]));return a&&(s.queryParameters.forwardToReplicas=1),_(e.transporter.write({method:Z,path:m("1/indexes/%s/synonyms/%s",e.indexName,t)},s),function(l,i){return M(e)(l.taskID,i)})}},dn=function(e){return function(t){return Qe(e)(t).then(function(){return!0}).catch(function(n){if(n.status!==404)throw n;return!1})}},fn=function(e){return function(t,n,r){return e.transporter.read({method:f,path:m("1/answers/%s/prediction",e.indexName),data:{query:t,queryLanguages:n},cacheable:!0},r)}},pn=function(e){return function(t,n){var r=n||{},a=r.query,s=r.paginate,l=h(r,["query","paginate"]),i=0;return function u(){return Ye(e)(a||"",o(o({},l),{},{page:i})).then(function(p){for(var d=0,P=Object.entries(p.hits);d<P.length;d++){var w=b(P[d],2),S=w[0],x=w[1];if(t(x))return{object:x,position:parseInt(S,10),page:i}}if(i++,s===!1||i>=p.nbPages)throw{name:"ObjectNotFoundError",message:"Object not found."};return u()})}()}},hn=function(e){return function(t,n){return e.transporter.read({method:c,path:m("1/indexes/%s/%s",e.indexName,t)},n)}},mn=function(){return function(e,t){for(var n=0,r=Object.entries(e.hits);n<r.length;n++){var a=b(r[n],2),s=a[0];if(a[1].objectID===t)return parseInt(s,10)}return-1}},gn=function(e){return function(t,n){var r=n||{},a=r.attributesToRetrieve,s=h(r,["attributesToRetrieve"]),l=t.map(function(i){return o({indexName:e.indexName,objectID:i},a?{attributesToRetrieve:a}:{})});return e.transporter.read({method:f,path:"1/indexes/*/objects",data:{requests:l}},s)}},yn=function(e){return function(t,n){return e.transporter.read({method:c,path:m("1/indexes/%s/rules/%s",e.indexName,t)},n)}},Qe=function(e){return function(t){return e.transporter.read({method:c,path:m("1/indexes/%s/settings",e.indexName),data:{getVersion:2}},t)}},vn=function(e){return function(t,n){return e.transporter.read({method:c,path:m("1/indexes/%s/synonyms/%s",e.indexName,t)},n)}},bn=function(e){return function(t,n){return _(Xe(e)([t],n).then(function(r){return{objectID:r.objectIDs[0],taskID:r.taskIDs[0]}}),function(r,a){return M(e)(r.taskID,a)})}},Xe=function(e){return function(t,n){var r=n||{},a=r.createIfNotExists,s=h(r,["createIfNotExists"]),l=a?le.PartialUpdateObject:le.PartialUpdateObjectNoCreate;return Se(e)(t,l,s)}},wn=function(e){return function(t,n){var r=n||{},a=r.safe,s=r.autoGenerateObjectIDIfNotExist,l=r.batchSize,i=h(r,["safe","autoGenerateObjectIDIfNotExist","batchSize"]),u=function(x,D,q,K){return _(e.transporter.write({method:f,path:m("1/indexes/%s/operation",x),data:{operation:q,destination:D}},K),function(me,J){return M(e)(me.taskID,J)})},p=Math.random().toString(36).substring(7),d="".concat(e.indexName,"_tmp_").concat(p),P=je({appId:e.appId,transporter:e.transporter,indexName:d}),w=[],S=u(e.indexName,d,"copy",o(o({},i),{},{scope:["settings","synonyms","rules"]}));return w.push(S),_((a?S.wait(i):S).then(function(){var x=P(t,o(o({},i),{},{autoGenerateObjectIDIfNotExist:s,batchSize:l}));return w.push(x),a?x.wait(i):x}).then(function(){var x=u(d,e.indexName,"move",i);return w.push(x),a?x.wait(i):x}).then(function(){return Promise.all(w)}).then(function(x){var D=b(x,3),q=D[0],K=D[1],me=D[2];return{objectIDs:K.objectIDs,taskIDs:[q.taskID].concat(O(K.taskIDs),[me.taskID])}}),function(x,D){return Promise.all(w.map(function(q){return q.wait(D)}))})}},_n=function(e){return function(t,n){return De(e)(t,o(o({},n),{},{clearExistingRules:!0}))}},Pn=function(e){return function(t,n){return Ee(e)(t,o(o({},n),{},{clearExistingSynonyms:!0}))}},xn=function(e){return function(t,n){return _(je(e)([t],n).then(function(r){return{objectID:r.objectIDs[0],taskID:r.taskIDs[0]}}),function(r,a){return M(e)(r.taskID,a)})}},je=function(e){return function(t,n){var r=n||{},a=r.autoGenerateObjectIDIfNotExist,s=h(r,["autoGenerateObjectIDIfNotExist"]),l=a?le.AddObject:le.UpdateObject;if(l===le.UpdateObject){var i=!0,u=!1,p=void 0;try{for(var d,P=t[Symbol.iterator]();!(i=(d=P.next()).done);i=!0)if(d.value.objectID===void 0)return _(Promise.reject({name:"MissingObjectIDError",message:"All objects must have an unique objectID (like a primary key) to be valid. Algolia is also able to generate objectIDs automatically but *it's not recommended*. To do it, use the `{'autoGenerateObjectIDIfNotExist': true}` option."}))}catch(w){u=!0,p=w}finally{try{i||P.return==null||P.return()}finally{if(u)throw p}}}return Se(e)(t,l,s)}},kn=function(e){return function(t,n){return De(e)([t],n)}},De=function(e){return function(t,n){var r=n||{},a=r.forwardToReplicas,s=r.clearExistingRules,l=A(h(r,["forwardToReplicas","clearExistingRules"]));return a&&(l.queryParameters.forwardToReplicas=1),s&&(l.queryParameters.clearExistingRules=1),_(e.transporter.write({method:f,path:m("1/indexes/%s/rules/batch",e.indexName),data:t},l),function(i,u){return M(e)(i.taskID,u)})}},In=function(e){return function(t,n){return Ee(e)([t],n)}},Ee=function(e){return function(t,n){var r=n||{},a=r.forwardToReplicas,s=r.clearExistingSynonyms,l=r.replaceExistingSynonyms,i=A(h(r,["forwardToReplicas","clearExistingSynonyms","replaceExistingSynonyms"]));return a&&(i.queryParameters.forwardToReplicas=1),(l||s)&&(i.queryParameters.replaceExistingSynonyms=1),_(e.transporter.write({method:f,path:m("1/indexes/%s/synonyms/batch",e.indexName),data:t},i),function(u,p){return M(e)(u.taskID,p)})}},Ye=function(e){return function(t,n){return e.transporter.read({method:f,path:m("1/indexes/%s/query",e.indexName),data:{query:t},cacheable:!0},n)}},Ze=function(e){return function(t,n,r){return e.transporter.read({method:f,path:m("1/indexes/%s/facets/%s/query",e.indexName,t),data:{facetQuery:n},cacheable:!0},r)}},et=function(e){return function(t,n){return e.transporter.read({method:f,path:m("1/indexes/%s/rules/search",e.indexName),data:{query:t}},n)}},tt=function(e){return function(t,n){return e.transporter.read({method:f,path:m("1/indexes/%s/synonyms/search",e.indexName),data:{query:t}},n)}},On=function(e){return function(t,n){var r=n||{},a=r.forwardToReplicas,s=A(h(r,["forwardToReplicas"]));return a&&(s.queryParameters.forwardToReplicas=1),_(e.transporter.write({method:k,path:m("1/indexes/%s/settings",e.indexName),data:t},s),function(l,i){return M(e)(l.taskID,i)})}},M=function(e){return function(t,n){return U(function(r){return function(a){return function(s,l){return a.transporter.read({method:c,path:m("1/indexes/%s/task/%s",a.indexName,s.toString())},l)}}(e)(t,n).then(function(a){return a.status!=="published"?r():void 0})})}},le={AddObject:"addObject",UpdateObject:"updateObject",PartialUpdateObject:"partialUpdateObject",PartialUpdateObjectNoCreate:"partialUpdateObjectNoCreate",DeleteObject:"deleteObject",DeleteIndex:"delete",ClearIndex:"clear"},Te={Settings:"settings",Synonyms:"synonyms",Rules:"rules"},Sn=1,jn=2,Dn=3;function nt(e,t,n){var r,a={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(i){return new Promise(function(u){var p=new XMLHttpRequest;p.open(i.method,i.url,!0),Object.keys(i.headers).forEach(function(S){return p.setRequestHeader(S,i.headers[S])});var d,P=function(S,x){return setTimeout(function(){p.abort(),u({status:0,content:x,isTimedOut:!0})},1e3*S)},w=P(i.connectTimeout,"Connection timeout");p.onreadystatechange=function(){p.readyState>p.OPENED&&d===void 0&&(clearTimeout(w),d=P(i.responseTimeout,"Socket timeout"))},p.onerror=function(){p.status===0&&(clearTimeout(w),clearTimeout(d),u({content:p.responseText||"Network request failed",status:p.status,isTimedOut:!1}))},p.onload=function(){clearTimeout(w),clearTimeout(d),u({content:p.responseText,status:p.status,isTimedOut:!1})},p.send(i.data)})}},logger:(r=Dn,{debug:function(i,u){return Sn>=r&&console.debug(i,u),Promise.resolve()},info:function(i,u){return jn>=r&&console.info(i,u),Promise.resolve()},error:function(i,u){return console.error(i,u),Promise.resolve()}}),responsesCache:T(),requestsCache:T({serializable:!1}),hostsCache:$({caches:[j({key:"".concat("4.19.1","-").concat(e)}),T()]}),userAgent:Fe("4.19.1").add({segment:"Browser"})},s=o(o({},a),n),l=function(){return function(i){return function(u){var p=u.region||"us",d=L(z.WithinHeaders,u.appId,u.apiKey),P=te(o(o({hosts:[{url:"personalization.".concat(p,".algolia.com")}]},u),{},{headers:o(o(o({},d.headers()),{"content-type":"application/json"}),u.headers),queryParameters:o(o({},d.queryParameters()),u.queryParameters)}));return ee({appId:u.appId,transporter:P},u.methods)}(o(o(o({},a),i),{},{methods:{getPersonalizationStrategy:_t,setPersonalizationStrategy:Pt}}))}};return function(i){var u=i.appId,p=L(i.authMode!==void 0?i.authMode:z.WithinHeaders,u,i.apiKey),d=te(o(o({hosts:[{url:"".concat(u,"-dsn.algolia.net"),accept:H.Read},{url:"".concat(u,".algolia.net"),accept:H.Write}].concat(C([{url:"".concat(u,"-1.algolianet.com")},{url:"".concat(u,"-2.algolianet.com")},{url:"".concat(u,"-3.algolianet.com")}]))},i),{},{headers:o(o(o({},p.headers()),{"content-type":"application/x-www-form-urlencoded"}),i.headers),queryParameters:o(o({},p.queryParameters()),i.queryParameters)}));return ee({transporter:d,appId:u,addAlgoliaAgent:function(P,w){d.userAgent.add({segment:P,version:w})},clearCache:function(){return Promise.all([d.requestsCache.clear(),d.responsesCache.clear()]).then(function(){})}},i.methods)}(o(o({},s),{},{methods:{search:He,searchForFacetValues:Ke,multipleBatch:zt,multipleGetObjects:Bt,multipleQueries:He,copyIndex:Pe,copySettings:jt,copySynonyms:Dt,copyRules:St,moveIndex:$t,listIndices:Ut,getLogs:At,listClusters:Vt,multipleSearchForFacetValues:Ke,getApiKey:pe,addApiKey:xt,listApiKeys:Lt,updateApiKey:Yt,deleteApiKey:Tt,restoreApiKey:Kt,assignUserID:kt,assignUserIDs:It,getUserID:Ct,searchUserIDs:Qt,listUserIDs:Ft,getTopUserIDs:Rt,removeUserID:Wt,hasPendingMappings:Mt,clearDictionaryEntries:Ot,deleteDictionaryEntries:qt,getDictionarySettings:Nt,getAppTask:We,replaceDictionaryEntries:Ht,saveDictionaryEntries:Jt,searchDictionaryEntries:Gt,setDictionarySettings:Xt,waitAppTask:ce,customRequest:Et,initIndex:function(i){return function(u){return he(i)(u,{methods:{batch:Je,delete:sn,findAnswers:fn,getObject:hn,getObjects:gn,saveObject:xn,saveObjects:je,search:Ye,searchForFacetValues:Ze,waitTask:M,setSettings:On,getSettings:Qe,partialUpdateObject:bn,partialUpdateObjects:Xe,deleteObject:un,deleteObjects:Ge,deleteBy:on,clearObjects:nn,browseObjects:Zt,getObjectPosition:mn,findObject:pn,exists:dn,saveSynonym:In,saveSynonyms:Ee,getSynonym:vn,searchSynonyms:tt,browseSynonyms:tn,deleteSynonym:ln,clearSynonyms:an,replaceAllObjects:wn,replaceAllSynonyms:Pn,searchRules:et,getRule:yn,deleteRule:cn,saveRule:kn,saveRules:De,replaceAllRules:_n,browseRules:en,clearRules:rn}})}},initAnalytics:function(){return function(i){return function(u){var p=u.region||"us",d=L(z.WithinHeaders,u.appId,u.apiKey),P=te(o(o({hosts:[{url:"analytics.".concat(p,".algolia.com")}]},u),{},{headers:o(o(o({},d.headers()),{"content-type":"application/json"}),u.headers),queryParameters:o(o({},d.queryParameters()),u.queryParameters)}));return ee({appId:u.appId,transporter:P},u.methods)}(o(o(o({},a),i),{},{methods:{addABTest:gt,getABTest:vt,getABTests:bt,stopABTest:wt,deleteABTest:yt}}))}},initPersonalization:l,initRecommendation:function(){return function(i){return s.logger.info("The `initRecommendation` method is deprecated. Use `initPersonalization` instead."),l()(i)}}}}))}return nt.version="4.19.1",nt})})(ft);var Bn=ft.exports;const Wn=zn(Bn),Hn=[{category:"環境",fields:[{label:"ISO 14064",type:"boolean",keywords:[14064]},{label:"範疇一直接排放",type:"number",keywords:["範疇一"],notes:"要抓的是台灣全場的，可能會有各工廠、或是全世界"},{label:"範疇二間接排放",type:"number",keywords:["範疇二","範疇 2","範疇2"],notes:"要抓的是台灣全場的，可能會有各工廠、或是全世界"},{label:"碳密集度",type:"string",keywords:["密集度"],notes:"可能會分不同場、不同產線，如果有的話，分開寫，須註記單位"},{label:"碳定價",type:"number",keywords:["碳定價"]},{label:"總用電量",type:"number",keywords:["電力","用電","能源"],notes:"單位：千度，電力只看電力欄位，因為可能會有其他石化燃料等"},{label:"再生能源設置量",type:"number",keywords:["再生能源"],notes:"單位：KW ，可能是寫「沒有使用」"},{label:"再生能源發電量",type:"number",keywords:["再生能源"],notes:"單位：千度，可能是寫「沒有使用」"}]},{category:"社會",fields:[{label:"正式員工數",type:"number",keywords:["正式員工","全職","定期員工"],notes:"單位：人"},{label:"非正式員工數",type:"number",keywords:["非正式員工","不定期","協力","派遣"],notes:"單位：人"},{label:"性別比",type:"number",keywords:["性別"],notes:"男/女"},{label:"是否聘用移工",type:"boolean",keywords:["外籍","移工"]},{label:"是否聘用身障人士",type:"boolean",keywords:["身心障礙"]},{label:"新進率",type:"number",keywords:["新進"]},{label:"離職率",type:"number",keywords:["離職"]}]},{category:"治理",fields:[{label:"ISO 9001",type:"boolean",keywords:[9001]},{label:"ISO 14001",type:"number",keywords:[14001]},{label:"營利事業所得稅稅額",type:"number",keywords:["繳納","營所稅","所得"],notes:"單位：元"},{label:"政府補助、補貼金額",type:"number",keywords:["201-4","抵減稅額"],notes:"單位：元"}]}],Kn=Hn,Jn={class:"controlPanel"},Gn=R("h1",{class:"f4 b"},"企業永續報告書閱讀器-測試版",-1),Qn={class:"b--gray f6"},Xn={class:"pv1 mr2"},Yn=["onClick"],Zn={class:"bt bb b--gray mv3 pv2"},er={class:"f6 b"},tr={class:"mv3 pb2 bb"},nr={class:"controlPanel__keywordSection"},rr={class:"flex f6"},ar=R("div",{class:"flex-none"},"欄位關鍵字",-1),or={class:"flex flex-wrap"},ir=["onClick"],sr={class:"f6 gray mv1"},ur=["onClick"],cr={class:"flex-none dark-gray"},lr={class:"pl2"},dr={class:"flex justify-between items-center"},ke=7,fr=be({__name:"ControlPanel",emits:["report","page"],setup(y,{emit:v}){const g=[{year:2021,reports:[{id:"11913502",name:"台泥",totalPage:121},{id:"07838854",name:"中鴻",totalPage:115},{id:"89406518",name:"台塑",totalPage:177}]}],I=N(2021),o=N(g[0].reports[0]),h=N(0),b=Kn.flatMap(c=>c.fields.map(f=>({category:c.category,...f}))),O=G(()=>b[h.value]),j=G(()=>h.value<b.length-1?b[h.value+1]:b[0]),$=G(()=>h.value>0?b[h.value-1]:b[b.length-1]);function T(c,f){I.value=c,o.value=f,ie(),v("report",{year:c,company:f})}we(()=>{v("report",{year:I.value,company:o.value})});function L(c,f){return c===I.value&&f.id===o.value.id}function U(){h.value<b.length-1?h.value+=1:h.value=0}function _(){h.value>0?h.value-=1:h.value=b.length-1}re([O],()=>{H.value=[],A.value="",z.value=""});const C=An(),m=Wn(C.public.algoliaAppId,C.public.algoliaSearchApiKey).initIndex(C.public.algoliaIndexName),z=N(""),A=N(""),H=N([]),Q=G(()=>A.value||z.value||"");re([z,A],([c,f],[k,V])=>{c!==k&&c?A.value="":f!==V&&f&&(z.value="")});function ue(c){z.value=c}re([Q],()=>{ie()});async function ie(){if(!Q.value){H.value=[],Y.value=null;return}const{hits:c}=await m.search(Q.value,{facetFilters:[`company:${o.value.id}`,`year:${I.value}`]});H.value=c,Y.value=null}function ae(c){c=c.replace(/\n/g,"");const f=`${z.value||""}`,k=c.indexOf(f),V=f.length+ke;return k>ke?"..."+c.slice(k-ke,k+ke+V)+"...":c.slice(0,V*2)+"..."}const Y=N(null);function Z(c){Y.value=c,v("page",{highlight:Q.value,page:c.page})}return(c,f)=>(F(),W("div",Jn,[Gn,R("div",Qn,[(F(),W(fe,null,ye(g,k=>R("div",{class:"mt3 flex items-center",key:k.year},[R("div",Xn,ne(k.year),1),(F(!0),W(fe,null,ye(k.reports,V=>(F(),W("button",{class:Ne(["controlPanel__company pv1 ph3 ba b--black mr1 pointer",{"controlPanel__company--active":L(k.year,V)}]),key:V.id,onClick:X=>T(k.year,V)},ne(V.name),11,Yn))),128))])),64))]),R("div",Zn,[R("div",er,ne(E(O).category)+" | "+ne(E(O).label),1),R("div",tr,[R("div",nr,[R("div",rr,[ar,R("div",or,[(F(!0),W(fe,null,ye(E(O).keywords,k=>(F(),W("button",{class:Ne(["controlPanel__keyword pointer",{"controlPanel__keyword--active":k===E(Q)}]),key:k,onClick:V=>ue(k)},ne(k),11,ir))),128)),rt(R("input",{class:"mt1 f6 w-100 controlPanel__input","onUpdate:modelValue":f[0]||(f[0]=k=>qn(A)?A.value=k:null),placeholder:"自訂關鍵字"},null,512),[[Tn,E(A),void 0,{trim:!0}]])])]),rt(R("div",sr,[(F(!0),W(fe,null,ye(E(H),k=>(F(),W("div",{class:Ne(["flex mv2 dim pointer",{b:k===E(Y)}]),key:k.page,onClick:V=>Z(k)},[R("div",cr,"頁"+ne(k.page),1),R("div",lr,ne(ae(k.content)),1)],10,ur))),128))],512),[[Nn,E(H).length]])])]),R("div",dr,[R("button",{class:"controlPanel__cursor",onClick:_},"《 "+ne(E($).label),1),R("button",{class:"controlPanel__cursor",onClick:U},ne(E(j).label)+" 》",1)])])]))}});const pr=be({__name:"SinglePdfPage",props:{document:{type:Object,required:!0},page:{type:Number,required:!0},highlight:{type:String,default:""},noScroll:{type:Boolean,default:!0},scale:{type:Number,default:.95}},emits:["loaded"],setup(y,{emit:v}){const g=y,I=N(null);function o(){const h=window.pdfjsViewer;if(!I.value)return;const b=new h.EventBus,O={container:I.value.parentElement,viewer:I.value,eventBus:b,linkService:new h.PDFLinkService({eventBus:b}),findController:null};g.highlight&&(O.findController=new h.PDFFindController({eventBus:b,linkService:O.linkService}));const j=new h.PDFSinglePageViewer(O);O.linkService.setViewer(j),b.on("pagesinit",()=>{if(j._setScale(g.scale,g.noScroll),g.highlight)b.dispatch("find",{type:"",query:g.highlight,phraseSearch:!0,highlightAll:!0});else{const T=j.container.parentElement.scrollTop;j.currentPageNumber=g.page,j.container.parentElement.scrollTo({top:T})}v("loaded")}),b.on("updatetextlayermatches",()=>{j.currentPageNumber!==g.page&&j._setCurrentPageNumber(g.page,!g.noScroll)}),j.setDocument(g.document),O.linkService.setDocument(g.document,null)}return we(o),(h,b)=>(F(),W("div",{class:"sip pdfViewer",ref_key:"pageEle",ref:I},null,512))}});const hr=st(pr,[["__scopeId","data-v-32ba17af"]]);function Ve(y){return Rn()?(Cn(y),!0):!1}function Ue(y){return typeof y=="function"?y():E(y)}const mr=typeof window<"u",gr=y=>y!=null,ve=()=>{};function yr(...y){if(y.length!==1)return Mn(...y);const v=y[0];return typeof v=="function"?Ln(Vn(()=>({get:v,set:ve}))):N(v)}function vr(y,v=!0){ut()?we(y):v?y():Me(y)}function Ie(y){var v;const g=Ue(y);return(v=g==null?void 0:g.$el)!=null?v:g}const _e=mr?window:void 0;function br(...y){let v,g,I,o;if(typeof y[0]=="string"||Array.isArray(y[0])?([g,I,o]=y,v=_e):[v,g,I,o]=y,!v)return ve;Array.isArray(g)||(g=[g]),Array.isArray(I)||(I=[I]);const h=[],b=()=>{h.forEach(T=>T()),h.length=0},O=(T,L,U,_)=>(T.addEventListener(L,U,_),()=>T.removeEventListener(L,U,_)),j=re(()=>[Ie(v),Ue(o)],([T,L])=>{b(),T&&h.push(...g.flatMap(U=>I.map(_=>O(T,U,_,L))))},{immediate:!0,flush:"post"}),$=()=>{j(),b()};return Ve($),$}function pt(){const y=N(!1);return ut()&&we(()=>{y.value=!0}),y}function ht(y){const v=pt();return G(()=>(v.value,!!y()))}function wr(y,v={}){const{window:g=_e}=v,I=ht(()=>g&&"matchMedia"in g&&typeof g.matchMedia=="function");let o;const h=N(!1),b=()=>{o&&("removeEventListener"in o?o.removeEventListener("change",O):o.removeListener(O))},O=()=>{I.value&&(b(),o=g.matchMedia(yr(y).value),h.value=!!(o!=null&&o.matches),o&&("addEventListener"in o?o.addEventListener("change",O):o.addListener(O)))};return ct(O),Ve(()=>b()),h}function _r(y,v,g={}){const{root:I,rootMargin:o="0px",threshold:h=.1,window:b=_e,immediate:O=!0}=g,j=ht(()=>b&&"IntersectionObserver"in b),$=G(()=>{const C=Ue(y);return(Array.isArray(C)?C:[C]).map(Ie).filter(gr)});let T=ve;const L=N(O),U=j.value?re(()=>[$.value,Ie(I),L.value],([C,ee])=>{if(T(),!L.value||!C.length)return;const m=new IntersectionObserver(v,{root:Ie(ee),rootMargin:o,threshold:h});C.forEach(z=>z&&m.observe(z)),T=()=>{m.disconnect(),T=ve}},{immediate:O,flush:"post"}):ve,_=()=>{T(),U(),L.value=!1};return Ve(_),{isSupported:j,isActive:L,pause(){T(),L.value=!1},resume(){L.value=!0},stop:_}}function Pr(y,{window:v=_e,scrollTarget:g}={}){const I=N(!1);return _r(y,([{isIntersecting:o}])=>{I.value=o},{root:g,window:v}),I}function xr(y={}){const{window:v=_e,initialWidth:g=1/0,initialHeight:I=1/0,listenOrientation:o=!0,includeScrollbar:h=!0}=y,b=N(g),O=N(I),j=()=>{v&&(h?(b.value=v.innerWidth,O.value=v.innerHeight):(b.value=v.document.documentElement.clientWidth,O.value=v.document.documentElement.clientHeight))};if(j(),vr(j),br("resize",j,{passive:!0}),o){const $=wr("(orientation: portrait)");re($,()=>j())}return{width:b,height:O}}const kr=300,Ir=be({__name:"EmptyPage",emits:["visible"],setup(y,{emit:v}){const g=N(null),I=Pr(g);let o=null;function h(){clearTimeout(o),o=setTimeout(()=>{v("visible",!0)},kr)}return re(I,b=>{b?h():clearTimeout(o)}),(b,O)=>(F(),W("div",{class:"emptyPage",ref_key:"page",ref:g},null,512))}}),Re="https://cdn.jsdelivr.net/npm/pdfjs-dist@2.14.305",Or="https://ddio-public.s3.us-west-2.amazonaws.com/gcaa-csr-report/demo",Ce=10,Sr=100,it=12,jr=16,Dr=be({__name:"PdfViewer",props:{page:{type:Number,default:1},year:{type:[Number,String],default:2019},company:{type:Object,required:!0},highlight:{type:[String,Number],default:""}},setup(y){const v=y;Un({link:[{rel:"stylesheet",href:`${Re}/web/pdf_viewer.css`}]});const g=N(!1),I=N(void 0),o=Ae({}),h=Ae(null),b=N([]);we(()=>{U()}),Fn(()=>{clearTimeout(I.value)}),re(g,()=>{A()});const O=G(()=>h.value&&m.value),j=G(()=>`${Or}/${v.year}/${v.company.id}`),$=G(()=>v.highlight+""),T=G(()=>{const c=$.value;let f=c.split(/[，。！？]/)[0];return f.length<it&&(f=c.slice(0,it)),f});function L(){return!!window&&!!window.pdfjsLib&&!!window.pdfjsViewer}function U(){I.value=setTimeout(async()=>{const c=L();c?(window.pdfjsLib.GlobalWorkerOptions.workerSrc=`${Re}/build/pdf.worker.js`,await Me()):U(),g.value=c},Sr)}async function _(c){const f=window.pdfjsLib,k=`${Re}/cmaps/`,V=c%Ce||Ce,X=H(c);o.value[X]||(o.value[X]=f.getDocument({url:`${j.value}/${X}.pdf`,cMapUrl:k,cMapPacked:!0,enableXfa:!0}));const te=await o.value[X].promise;return ee(te),{document:te,page:V}}const C=N(null);async function ee(c){if(C.value)return;const f=await c.getPage(1),{width:k,height:V}=f.getViewport({scale:1});C.value={width:k,height:V}}const m=G(()=>{if(!C.value||!ue)return null;const c=1,k=(Y.value-jr*2)*c/C.value.width;return{scale:1,width:C.value.width*k,height:C.value.height*k}}),z=G(()=>m.value?{width:`${m.value.width}px`,height:`${m.value.height}px`}:{});async function A(){const c=await _(1);c.highlight=T.value,h.value=c}ct(()=>{!j.value||!v.company||(h.value=null,C.value=null,o.value={},b.value=Array(v.company.totalPage).fill(null),A())});function H(c){return`${Math.ceil(c/Ce)}`.padStart(3,"0")}async function Q(c){if(c>=b.value.length)throw new Error(`Invalid page number: ${c}`);if(b.value[c])return;const f=await _(c+2);b.value[c]={pdf:Ae(f)}}const ue=pt(),{width:ie}=xr(),ae=N(null),Y=G(()=>{let c=960;return ue.value&&(c=ie.value*.75,ae.value&&(c=ae.value.clientWidth)),c}),Z=G(()=>({width:`${Y.value}px`}));return re(()=>v.page,async()=>{const c=v.page-2;await Q(c),await Me();const f=document.querySelector(`.reportViewer__page:nth-of-type(${v.page})`);f&&f.scrollIntoView({behavior:"smooth"})}),(c,f)=>{const k=hr,V=Ir;return F(),W("div",{class:"reportViewer relative",ref_key:"rootEle",ref:ae},[E(O)?(F(),W("div",{key:0,class:"reportViewer__container",style:at(E(Z))},[lt(k,ot({class:"reportViewer__page"},E(h),{scale:E(m).scale,"no-scroll":!1}),null,16,["scale"]),(F(!0),W(fe,null,ye(E(b),(X,te)=>(F(),W(fe,{key:te},[X?(F(),Le(k,ot({key:1,class:"reportViewer__page"},X.pdf,{scale:E(m).scale}),null,16,["scale"])):(F(),Le(V,{key:0,class:"reportViewer__page",style:at(E(z)),onVisible:Fe=>Q(te)},null,8,["style","onVisible"]))],64))),128))],4)):dt("",!0)],512)}}});const Er=st(Dr,[["__scopeId","data-v-c684fe3a"]]),Tr={class:"main"},qr={class:"pa2"},Nr={class:"ba b--gray pa2"},Ar={class:"main__control"},Rr={class:"main__reader"},Mr=be({__name:"index",setup(y){const v=N(null),g=N(null);function I(h){v.value=h,g.value={page:1,highlight:""}}function o(h){g.value=h}return(h,b)=>{const O=fr,j=Er;return F(),W("main",Tr,[R("div",qr,[R("div",Nr,[R("div",Ar,[lt(O,{onReport:I,onPage:o})])])]),R("div",Rr,[E(v)&&E(g)?(F(),Le(j,{key:0,year:E(v).year,company:E(v).company,page:E(g).page,highlight:E(g).highlight},null,8,["year","company","page","highlight"])):dt("",!0)])])}}});export{Mr as default};
